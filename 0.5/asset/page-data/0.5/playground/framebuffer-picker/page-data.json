{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.5/playground/framebuffer-picker","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine/controls\", \"@oasis-engine/framebuffer-picker\", \"oasis-engine\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine/controls\"), require(\"@oasis-engine/framebuffer-picker\"), require(\"oasis-engine\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngine/controls\"], global[\"@oasisEngine/framebufferPicker\"], global.oasisEngine);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, _framebufferPicker, _oasisEngine) {\n  \"use strict\";\n\n  /**\n   * @title Framebuffer Picker\n   * @category Advance\n   */\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  var scene = engine.sceneManager.activeScene;\n  var rootNode = scene.createRootEntity();\n  scene.ambientLight.diffuseSolidColor.setValue(1, 1, 1, 1); // Create camera\n\n  var cameraNode = rootNode.createChild(\"camera_node\");\n  cameraNode.transform.position = new _oasisEngine.Vector3(10, 10, 30);\n  var camera = cameraNode.addComponent(_oasisEngine.Camera);\n  var control = cameraNode.addComponent(_controls.OrbitControl);\n  control.target.setValue(0, 3, 0);\n  engine.resourceManager.load(\"https://gw.alipayobjects.com/os/bmw-prod/f40ef8dd-4c94-41d4-8fac-c1d2301b6e47.glb\").then(function (gltf) {\n    var defaultSceneRoot = gltf.defaultSceneRoot,\n        materials = gltf.materials;\n    var material = materials[0];\n    defaultSceneRoot.transform.setScale(0.1, 0.1, 0.1);\n    rootNode.addChild(defaultSceneRoot); // add framebuffer picker component\n\n    var framebufferPicker = rootNode.addComponent(_framebufferPicker.FramebufferPicker);\n    framebufferPicker.camera = camera;\n\n    framebufferPicker.onPick = function (obj) {\n      if (obj) {\n        var component = obj.component,\n            mesh = obj.mesh;\n        console.log(component, mesh);\n        material.baseColor.setValue(1, 0, 0, 1);\n      } else {\n        material.baseColor.setValue(1, 1, 1, 1);\n      }\n    };\n\n    document.getElementById(\"canvas\").addEventListener(\"mousedown\", function (e) {\n      framebufferPicker.pick(e.offsetX, e.offsetY);\n    });\n  }); // Run\n\n  engine.run();\n});"},"name":"framebuffer-picker","id":"2dbf822b-d1db-5fab-b2db-e273b423facb"}}},"staticQueryHashes":[]}