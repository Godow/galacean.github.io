{"componentChunkName":"component---src-templates-docs-tsx","path":"/0.5/docs/custom-material","result":{"data":{"markdownRemark":{"html":"<p>There may be some special rendering requirements, such as water flow, and this time you need <strong>custom material</strong> to achieve. By using <a href=\"/0.5/api/core/Material\">Material</a> and <a href=\"/0.5/api/core/Shader\">Shader</a>, you can integrate your own shader code into the engine rendering process.</p>\n<p><playground name=\"shader-water.ts\"><textarea>/**\n * @title Shader Water\n * @category Material\n */\nimport { OrbitControl } from \"@oasis-engine/controls\";\nimport * as dat from \"dat.gui\";\nimport {\n  AssetType,\n  Camera,\n  Color,\n  Engine,\n  Material,\n  MeshRenderer,\n  PrimitiveMesh,\n  Script,\n  Shader,\n  Texture2D,\n  Vector3,\n  WebGLEngine\n} from \"oasis-engine\";\n\nconst gui = new dat.GUI();\n//-- create engine object\nconst engine = new WebGLEngine(\"canvas\");\nengine.canvas.resizeByClientSize();\n\nconst scene = engine.sceneManager.activeScene;\nconst rootEntity = scene.createRootEntity();\n\n//-- create camera\nconst cameraEntity = rootEntity.createChild(\"camera_entity\");\ncameraEntity.transform.position = new Vector3(0, 0, 15);\ncameraEntity.addComponent(Camera);\nconst orbitControl = cameraEntity.addComponent(OrbitControl);\norbitControl.minDistance = 15;\norbitControl.maxDistance = 15;\n\n// 自定义材质\nconst vertexSource = `\nuniform mat4 u_MVPMat;\nattribute vec3 POSITION;\nattribute vec2 TEXCOORD_0;\nattribute vec3 NORMAL;\n\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\n\nvoid main() {\n\n  gl_Position = u_MVPMat  *  vec4( POSITION, 1.0 );\n  v_uv = TEXCOORD_0;\n  v_normal = NORMAL;\n  v_position = POSITION;\n}\n `;\n\nconst fragSource = `\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nuniform float u_time;\nuniform sampler2D u_texture;\nuniform vec3 u_cameraPos;\n\n#define EPS 0.001\n#define MAX_ITR 100\n#define MAX_DIS 100.0\n#define PI\t \t  3.141592\n\nuniform float u_water_scale;\nuniform float u_water_speed;\n\nuniform vec3 u_sea_base;\nuniform vec3 u_water_color;\nuniform float u_sea_height;\n\n// Distance Functions\nfloat sd_sph(vec3 p, float r) { return length(p) - r; }\n\n// Distance Map\nfloat map(vec3 p, vec2 sc)\n{    \n    float l = cos(length(p * 2.0));\n    vec2 u = vec2(l, sc.y);\n    vec2 um = u * 0.3;\n    um.x += u_time * 0.1 * u_water_speed;\n    um.y += -u_time * 0.025 * u_water_speed;\n    um.x += (um.y) * 2.0;    \n    float a1 = texture2D(u_texture, (p.yz  *  .4 + um) * u_water_scale).x;\n    float a2 = texture2D(u_texture, (p.zx  *  .4 + um) * u_water_scale).x;\n    float a3 = texture2D(u_texture, (p.xy  *  .4 + um) * u_water_scale).x;\n    \n    float t1 = a1 + a2 + a3;\n    t1 /= 15.0 * u_water_scale;\n    \n    float b1 = texture2D(u_texture, (p.yz  *  1. + u) * u_water_scale).x;\n    float b2 = texture2D(u_texture, (p.zx  *  1. + u) * u_water_scale).x;\n    float b3 = texture2D(u_texture, (p.xy  *  1. + u) * u_water_scale).x;\n    \n    float t2 = b1 + b2 + b3;\n    t2 /= 15.0  *  u_water_scale;\n    \n    float comb = t1 * 0.4 + t2 * 0.1 * (1.0 - t1);\n    \n    return comb + sd_sph(p, 3.); // sd_box(p, vec3(1., 1., 1.)) + sdPlane(p, vec4(0., 0., 1.0, 0.));//\n}\n\nfloat diffuse(vec3 n,vec3 l,float p) {\n    return pow(dot(n,l) * 0.4 + 0.6,p);\n}\n\nfloat specular(vec3 n,vec3 l,vec3 e,float s) {    \n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;\n}\n\n// sky\nvec3 getSkyColor(vec3 e) {\n    e.y = max(e.y,0.0);\n    return vec3(pow(1.0-e.y,2.0), 1.0-e.y, 0.6+(1.0-e.y)*0.4);\n}\n\nvec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {  \n    float fresnel = clamp(1.0 - dot(n,-eye), 0.0, 1.0);\n    fresnel = pow(fresnel,3.0) * 0.65;\n\n    vec3 reflected = getSkyColor(reflect(eye,n));    \n    vec3 refracted = u_sea_base + diffuse(normalize(n),l,80.0) * u_water_color * 0.12; \n\n    vec3 color =  mix(refracted,reflected,fresnel);\n\n    float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);\n    color += u_water_color * (length(p) - u_sea_height) * 0.18 * atten; // \n\n    color += vec3(specular(n,l,eye,20.0));\n\n    return color;\n}\n\nvoid main (void) {\n\n    vec2 uv = vec2(v_uv.x * 0.5, v_uv.y * 0.5);//  / iResolution.xy;\n    \n    vec3 pos = v_position; \n    vec3 dist = pos - u_cameraPos;\n\n    float dis = EPS;\n    vec3 rayDir = normalize(dist);\n    \n    // Ray marching\n    for(int i = 0; i < MAX_ITR; i++)\n    {\n        if(dis < EPS || dis > MAX_DIS)\n          break;\n        dis = map(pos, uv);\n        pos += dis * rayDir;\n    }\n    \n    if (dis >= EPS) \n    {\n      discard;\n    }\n    \n    vec3 lig = normalize(vec3(-1., -3, -4.5));\n    vec2 eps = vec2(0.0, EPS);\n    vec3 normal = normalize(vec3(\n        map(pos + eps.yxx, uv) - map(pos - eps.yxx, uv),\n        map(pos + eps.xyx, uv) - map(pos - eps.xyx, uv),\n        map(pos + eps.xxy, uv) - map(pos - eps.xxy, uv)\n    ));\n    \n    vec3 col = getSeaColor(pos, normal, lig, rayDir, dist);\n    \n    gl_FragColor = vec4(col,1.0);\n}\n`;\n\n// 初始化 shader\nShader.create(\"water\", vertexSource, fragSource);\n\nclass ShaderMaterial extends Material {\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"water\"));\n\n    this.shaderData.setFloat(\"u_sea_height\", 0.6);\n    this.shaderData.setFloat(\"u_water_scale\", 0.2);\n    this.shaderData.setFloat(\"u_water_speed\", 3.5);\n    this.shaderData.setColor(\"u_sea_base\", new Color(0.1, 0.2, 0.22));\n    this.shaderData.setColor(\"u_water_color\", new Color(0.8, 0.9, 0.6));\n  }\n}\nconst material = new ShaderMaterial(engine);\n\n// 创建球体形的海面\nconst sphereEntity = rootEntity.createChild(\"sphere\");\nconst renderer = sphereEntity.addComponent(MeshRenderer);\nrenderer.mesh = PrimitiveMesh.createSphere(engine, 3, 50);\nrenderer.setMaterial(material);\n\n// 加载噪声纹理\nengine.resourceManager\n  .load({\n    type: AssetType.Texture2D,\n    url: \"https://gw.alipayobjects.com/mdn/rms_7c464e/afts/img/A*AC4IQZ6mfCIAAAAAAAAAAAAAARQnAQ\"\n  })\n  .then((texture: Texture2D) => {\n    material.shaderData.setTexture(\"u_texture\", texture);\n    engine.run();\n  });\n\n// u_time 更新脚本\nclass WaterScript extends Script {\n  onUpdate() {\n    material.shaderData.setFloat(\"u_time\", engine.time.timeSinceStartup * 0.001);\n  }\n}\nsphereEntity.addComponent(WaterScript);\n\n// debug\nfunction openDebug() {\n  const shaderData = material.shaderData;\n  const baseColor = shaderData.getColor(\"u_sea_base\");\n  const waterColor = shaderData.getColor(\"u_water_color\");\n  const debug = {\n    sea_height: shaderData.getFloat(\"u_sea_height\"),\n    water_scale: shaderData.getFloat(\"u_water_scale\"),\n    water_speed: shaderData.getFloat(\"u_water_speed\"),\n    sea_base: [baseColor.r * 255, baseColor.g * 255, baseColor.b * 255],\n    water_color: [waterColor.r * 255, waterColor.g * 255, waterColor.b * 255]\n  };\n\n  gui.add(debug, \"sea_height\", 0, 3).onChange((v) => {\n    shaderData.setFloat(\"u_sea_height\", v);\n  });\n  gui.add(debug, \"water_scale\", 0, 4).onChange((v) => {\n    shaderData.setFloat(\"u_water_scale\", v);\n  });\n  gui.add(debug, \"water_speed\", 0, 4).onChange((v) => {\n    shaderData.setFloat(\"u_water_speed\", v);\n  });\n  gui.addColor(debug, \"sea_base\").onChange((v) => {\n    baseColor.r = v[0] / 255;\n    baseColor.g = v[1] / 255;\n    baseColor.b = v[2] / 255;\n  });\n  gui.addColor(debug, \"water_color\").onChange((v) => {\n    waterColor.r = v[0] / 255;\n    waterColor.g = v[1] / 255;\n    waterColor.b = v[2] / 255;\n  });\n}\n\nopenDebug();\n</textarea><span class=\"token comment\">/**\n * @title Shader Water\n * @category Material\n */</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> OrbitControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@oasis-engine/controls\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> dat <span class=\"token keyword\">from</span> <span class=\"token string\">\"dat.gui\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  AssetType<span class=\"token punctuation\">,</span>\n  Camera<span class=\"token punctuation\">,</span>\n  Color<span class=\"token punctuation\">,</span>\n  Engine<span class=\"token punctuation\">,</span>\n  Material<span class=\"token punctuation\">,</span>\n  MeshRenderer<span class=\"token punctuation\">,</span>\n  PrimitiveMesh<span class=\"token punctuation\">,</span>\n  Script<span class=\"token punctuation\">,</span>\n  Shader<span class=\"token punctuation\">,</span>\n  Texture2D<span class=\"token punctuation\">,</span>\n  Vector3<span class=\"token punctuation\">,</span>\n  WebGLEngine\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"oasis-engine\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> gui <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">dat<span class=\"token punctuation\">.</span>GUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//-- create engine object</span>\n<span class=\"token keyword\">const</span> engine <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebGLEngine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nengine<span class=\"token punctuation\">.</span>canvas<span class=\"token punctuation\">.</span><span class=\"token function\">resizeByClientSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> scene <span class=\"token operator\">=</span> engine<span class=\"token punctuation\">.</span>sceneManager<span class=\"token punctuation\">.</span>activeScene<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rootEntity <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span><span class=\"token function\">createRootEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//-- create camera</span>\n<span class=\"token keyword\">const</span> cameraEntity <span class=\"token operator\">=</span> rootEntity<span class=\"token punctuation\">.</span><span class=\"token function\">createChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"camera_entity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncameraEntity<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncameraEntity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>Camera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> orbitControl <span class=\"token operator\">=</span> cameraEntity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>OrbitControl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\norbitControl<span class=\"token punctuation\">.</span>minDistance <span class=\"token operator\">=</span> <span class=\"token number\">15</span><span class=\"token punctuation\">;</span>\norbitControl<span class=\"token punctuation\">.</span>maxDistance <span class=\"token operator\">=</span> <span class=\"token number\">15</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 自定义材质</span>\n<span class=\"token keyword\">const</span> vertexSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\nuniform mat4 u_MVPMat;\nattribute vec3 POSITION;\nattribute vec2 TEXCOORD_0;\nattribute vec3 NORMAL;\n\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\n\nvoid main() {\n\n  gl_Position = u_MVPMat  *  vec4( POSITION, 1.0 );\n  v_uv = TEXCOORD_0;\n  v_normal = NORMAL;\n  v_position = POSITION;\n}\n </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fragSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nuniform float u_time;\nuniform sampler2D u_texture;\nuniform vec3 u_cameraPos;\n\n#define EPS 0.001\n#define MAX_ITR 100\n#define MAX_DIS 100.0\n#define PI\t \t  3.141592\n\nuniform float u_water_scale;\nuniform float u_water_speed;\n\nuniform vec3 u_sea_base;\nuniform vec3 u_water_color;\nuniform float u_sea_height;\n\n// Distance Functions\nfloat sd_sph(vec3 p, float r) { return length(p) - r; }\n\n// Distance Map\nfloat map(vec3 p, vec2 sc)\n{    \n    float l = cos(length(p * 2.0));\n    vec2 u = vec2(l, sc.y);\n    vec2 um = u * 0.3;\n    um.x += u_time * 0.1 * u_water_speed;\n    um.y += -u_time * 0.025 * u_water_speed;\n    um.x += (um.y) * 2.0;    \n    float a1 = texture2D(u_texture, (p.yz  *  .4 + um) * u_water_scale).x;\n    float a2 = texture2D(u_texture, (p.zx  *  .4 + um) * u_water_scale).x;\n    float a3 = texture2D(u_texture, (p.xy  *  .4 + um) * u_water_scale).x;\n    \n    float t1 = a1 + a2 + a3;\n    t1 /= 15.0 * u_water_scale;\n    \n    float b1 = texture2D(u_texture, (p.yz  *  1. + u) * u_water_scale).x;\n    float b2 = texture2D(u_texture, (p.zx  *  1. + u) * u_water_scale).x;\n    float b3 = texture2D(u_texture, (p.xy  *  1. + u) * u_water_scale).x;\n    \n    float t2 = b1 + b2 + b3;\n    t2 /= 15.0  *  u_water_scale;\n    \n    float comb = t1 * 0.4 + t2 * 0.1 * (1.0 - t1);\n    \n    return comb + sd_sph(p, 3.); // sd_box(p, vec3(1., 1., 1.)) + sdPlane(p, vec4(0., 0., 1.0, 0.));//\n}\n\nfloat diffuse(vec3 n,vec3 l,float p) {\n    return pow(dot(n,l) * 0.4 + 0.6,p);\n}\n\nfloat specular(vec3 n,vec3 l,vec3 e,float s) {    \n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;\n}\n\n// sky\nvec3 getSkyColor(vec3 e) {\n    e.y = max(e.y,0.0);\n    return vec3(pow(1.0-e.y,2.0), 1.0-e.y, 0.6+(1.0-e.y)*0.4);\n}\n\nvec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {  \n    float fresnel = clamp(1.0 - dot(n,-eye), 0.0, 1.0);\n    fresnel = pow(fresnel,3.0) * 0.65;\n\n    vec3 reflected = getSkyColor(reflect(eye,n));    \n    vec3 refracted = u_sea_base + diffuse(normalize(n),l,80.0) * u_water_color * 0.12; \n\n    vec3 color =  mix(refracted,reflected,fresnel);\n\n    float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);\n    color += u_water_color * (length(p) - u_sea_height) * 0.18 * atten; // \n\n    color += vec3(specular(n,l,eye,20.0));\n\n    return color;\n}\n\nvoid main (void) {\n\n    vec2 uv = vec2(v_uv.x * 0.5, v_uv.y * 0.5);//  / iResolution.xy;\n    \n    vec3 pos = v_position; \n    vec3 dist = pos - u_cameraPos;\n\n    float dis = EPS;\n    vec3 rayDir = normalize(dist);\n    \n    // Ray marching\n    for(int i = 0; i &lt; MAX_ITR; i++)\n    {\n        if(dis &lt; EPS || dis > MAX_DIS)\n          break;\n        dis = map(pos, uv);\n        pos += dis * rayDir;\n    }\n    \n    if (dis >= EPS) \n    {\n      discard;\n    }\n    \n    vec3 lig = normalize(vec3(-1., -3, -4.5));\n    vec2 eps = vec2(0.0, EPS);\n    vec3 normal = normalize(vec3(\n        map(pos + eps.yxx, uv) - map(pos - eps.yxx, uv),\n        map(pos + eps.xyx, uv) - map(pos - eps.xyx, uv),\n        map(pos + eps.xxy, uv) - map(pos - eps.xxy, uv)\n    ));\n    \n    vec3 col = getSeaColor(pos, normal, lig, rayDir, dist);\n    \n    gl_FragColor = vec4(col,1.0);\n}\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 初始化 shader</span>\nShader<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"water\"</span><span class=\"token punctuation\">,</span> vertexSource<span class=\"token punctuation\">,</span> fragSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ShaderMaterial</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Material</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">engine<span class=\"token operator\">:</span> Engine</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">,</span> Shader<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"water\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sea_height\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_scale\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_speed\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sea_base\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_color\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ShaderMaterial</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 创建球体形的海面</span>\n<span class=\"token keyword\">const</span> sphereEntity <span class=\"token operator\">=</span> rootEntity<span class=\"token punctuation\">.</span><span class=\"token function\">createChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sphere\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> sphereEntity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>MeshRenderer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrenderer<span class=\"token punctuation\">.</span>mesh <span class=\"token operator\">=</span> PrimitiveMesh<span class=\"token punctuation\">.</span><span class=\"token function\">createSphere</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrenderer<span class=\"token punctuation\">.</span><span class=\"token function\">setMaterial</span><span class=\"token punctuation\">(</span>material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 加载噪声纹理</span>\nengine<span class=\"token punctuation\">.</span>resourceManager\n  <span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> AssetType<span class=\"token punctuation\">.</span>Texture2D<span class=\"token punctuation\">,</span>\n    url<span class=\"token operator\">:</span> <span class=\"token string\">\"https://gw.alipayobjects.com/mdn/rms_7c464e/afts/img/A*AC4IQZ6mfCIAAAAAAAAAAAAAARQnAQ\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">texture<span class=\"token operator\">:</span> Texture2D</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    material<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setTexture</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_texture\"</span><span class=\"token punctuation\">,</span> texture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    engine<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// u_time 更新脚本</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WaterScript</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Script</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">onUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    material<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_time\"</span><span class=\"token punctuation\">,</span> engine<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span>timeSinceStartup <span class=\"token operator\">*</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nsphereEntity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>WaterScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// debug</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">openDebug</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> shaderData <span class=\"token operator\">=</span> material<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> baseColor <span class=\"token operator\">=</span> shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sea_base\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> waterColor <span class=\"token operator\">=</span> shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_color\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> debug <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    sea_height<span class=\"token operator\">:</span> shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">getFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sea_height\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    water_scale<span class=\"token operator\">:</span> shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">getFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_scale\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    water_speed<span class=\"token operator\">:</span> shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">getFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_speed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    sea_base<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>baseColor<span class=\"token punctuation\">.</span>r <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> baseColor<span class=\"token punctuation\">.</span>g <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> baseColor<span class=\"token punctuation\">.</span>b <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    water_color<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>waterColor<span class=\"token punctuation\">.</span>r <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> waterColor<span class=\"token punctuation\">.</span>g <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> waterColor<span class=\"token punctuation\">.</span>b <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  gui<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>debug<span class=\"token punctuation\">,</span> <span class=\"token string\">\"sea_height\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sea_height\"</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gui<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>debug<span class=\"token punctuation\">,</span> <span class=\"token string\">\"water_scale\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_scale\"</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gui<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>debug<span class=\"token punctuation\">,</span> <span class=\"token string\">\"water_speed\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_water_speed\"</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gui<span class=\"token punctuation\">.</span><span class=\"token function\">addColor</span><span class=\"token punctuation\">(</span>debug<span class=\"token punctuation\">,</span> <span class=\"token string\">\"sea_base\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    baseColor<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n    baseColor<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n    baseColor<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gui<span class=\"token punctuation\">.</span><span class=\"token function\">addColor</span><span class=\"token punctuation\">(</span>debug<span class=\"token punctuation\">,</span> <span class=\"token string\">\"water_color\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    waterColor<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n    waterColor<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n    waterColor<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> v<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">openDebug</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</playground></playground></p>\n<h2 id=\"create-shader\" style=\"position:relative;\"><a href=\"#create-shader\" aria-label=\"create shader permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create shader</h2>\n<p><a href=\"/0.5/api/core/Shader\">Shader</a> encapsulates vertex shaders, fragment shaders, shader pre-compilation, platform precision, and platform differences. It is very convenient to create and use. Users only need to pay attention to the shader algorithm itself, and don't have to worry about what precision is used, or which version of GLSL is written. Here is a simple demo:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Material<span class=\"token punctuation\">,</span> Shader<span class=\"token punctuation\">,</span> Color <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"oasis-engine\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//-- Shader</span>\n<span class=\"token keyword\">const</span> vertexSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  uniform mat4 u_MVPMat;\n\n  attribute vec3 POSITION; \n\n  void main() {\n    gl_Position = u_MVPMat * vec4(POSITION, 1.0);\n  }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fragmentSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  uniform vec4 u_color;\n\n  void main() {\n    gl_FragColor = u_color;\n  }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// create shader (only needs to be created once in the whole runtime )</span>\nShader<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"demo\"</span><span class=\"token punctuation\">,</span> vertexSource<span class=\"token punctuation\">,</span> fragmentSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// create custom material</span>\n<span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Material</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">,</span> Shader<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"demo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>Shader.create()</code> is used to add the shader to the cache pool of the engine, so the entire runtime only needs to be created once, and then you can pass <a href=\"/0.5/api/core/Shader#find\">Shader.find(name)</a> to use repeatedly. <strong>Note: The engine has pre-created blinn-phong, pbr, shadow-map, shadow, skybox, framebuffer-picker-color, and trail. Users can directly use these built-in shaders, but cannot create them with the same name.</strong></p>\n<p>Because we don't have uploaded <code>u_color</code> variable, the fragment output is still black (uniform has default value), let's introduce the built-in shader variable in the engine and how to upload a custom variable.</p>\n<h2 id=\"built-in-shader-variables\" style=\"position:relative;\"><a href=\"#built-in-shader-variables\" aria-label=\"built in shader variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Built-in shader variables</h2>\n<p>In the above, we gave the material a shader, this time the program can start rendering. It should be noted that there are two kinds of variables in the shader, one is the <code>attribute</code> variable which is <strong>per vertex</strong>, and the other is the <code>uniform</code> variable which is <strong>per shader</strong> (After GLSL300, they are unified as <code>in</code> variables). The engine has automatically uploaded some commonly used variables, and users can directly use them in the shader code, such as vertex data and <code>mvp</code> data. The following are the variables uploaded by the engine by default.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">attribute data</th>\n<th align=\"left\">attribute name</th>\n<th align=\"left\">type of data</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">vertex data</td>\n<td align=\"left\">POSITION</td>\n<td align=\"left\">vec3</td>\n</tr>\n<tr>\n<td align=\"left\">normal data</td>\n<td align=\"left\">NORMAL</td>\n<td align=\"left\">vec3</td>\n</tr>\n<tr>\n<td align=\"left\">tangent data</td>\n<td align=\"left\">TANGENT</td>\n<td align=\"left\">vec4</td>\n</tr>\n<tr>\n<td align=\"left\">vertex color</td>\n<td align=\"left\">COLOR_0</td>\n<td align=\"left\">vec4</td>\n</tr>\n<tr>\n<td align=\"left\">skeleton index</td>\n<td align=\"left\">JOINTS_0</td>\n<td align=\"left\">vec4</td>\n</tr>\n<tr>\n<td align=\"left\">skeleton weight</td>\n<td align=\"left\">WEIGHTS_0</td>\n<td align=\"left\">vec4</td>\n</tr>\n<tr>\n<td align=\"left\">fist uv coordinates</td>\n<td align=\"left\">TEXCOORD_0</td>\n<td align=\"left\">vec2</td>\n</tr>\n<tr>\n<td align=\"left\">Second uv coordinates</td>\n<td align=\"left\">TEXCOORD_1</td>\n<td align=\"left\">vec2</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">uniform data</th>\n<th align=\"left\">uniform name</th>\n<th align=\"left\">type of data</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">canvas resolution</td>\n<td align=\"left\">u_resolution</td>\n<td align=\"left\">vec2</td>\n</tr>\n<tr>\n<td align=\"left\">viewport matrix</td>\n<td align=\"left\">u_viewMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">projection matrix</td>\n<td align=\"left\">u_projMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">viewport projection matrix</td>\n<td align=\"left\">u_VPMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">viewport inverse matrix</td>\n<td align=\"left\">u_viewInvMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">projection inverse matrix</td>\n<td align=\"left\">u_projInvMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">camera position</td>\n<td align=\"left\">u_cameraPos</td>\n<td align=\"left\">vec3</td>\n</tr>\n<tr>\n<td align=\"left\">model local coordinate system matrix</td>\n<td align=\"left\">u_localMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">model world Coordinate System Matrix</td>\n<td align=\"left\">u_modelMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">model viewport matrix</td>\n<td align=\"left\">u_MVMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">model viewport projection matrix</td>\n<td align=\"left\">u_MVPMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">model viewport inverse matrix</td>\n<td align=\"left\">u_MVInvMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n<tr>\n<td align=\"left\">normal inverse transpose matrix</td>\n<td align=\"left\">u_normalMat</td>\n<td align=\"left\">mat4</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"upload-shader-variables\" style=\"position:relative;\"><a href=\"#upload-shader-variables\" aria-label=\"upload shader variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Upload shader variables</h2>\n<blockquote>\n<p>Please refer to <a href=\"/0.5/docs/mesh-renderer\">Mesh Renderer</a> for uploading attribute data, won’t repeat it here.</p>\n</blockquote>\n<p>In addition to the built-in variables, we can upload any variable with a custom name in the shader (it is recommended to use u_**, v_** to represent uniform and varying variables respectively), the only thing we have to do is using the correct interface according to the shader variable type. The upload interface is all in <a href=\"/0.5/api/core/ShaderData\">ShaderData</a>, and the shaderData instance objects are saved in the four categories <a href=\"/0.5/api/core/Scene\">Scene</a>, <a href=\"/0.5/api/core/Camera\">Camera</a>, <a href=\"/0.5/api/core/Renderer\">Renderer</a>, <a href=\"/0.5/api/core/Material\">Material</a> of the engine , we only need to call the interface in these shaderData, upload variables, and engine will automatically help us assemble these data at the bottom layer and optimize performance such as judging duplication.</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/OasisHub/fc605510-5b14-476f-8c91-03205c623b4b/image-20210722153638785.png\" alt=\"image-20210722153638785\"></p>\n<h3 id=\"shaderdata-separate-benefits\" style=\"position:relative;\"><a href=\"#shaderdata-separate-benefits\" aria-label=\"shaderdata separate benefits permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ShaderData separate benefits</h3>\n<p>The shaderData are saved in the four categories <a href=\"/0.5/api/core/Scene\">Scene</a>, <a href=\"/0.5/api/core/Camera\">Camera</a>, <a href=\"/0.5/api/core/Renderer\">Renderer</a>, <a href=\"/0.5/api/core/Material\">Material </a> of the engine, one of the benefits is that the bottom layer can upload a block of uniform according to the upload timing to improve performance; in addition, the material-independent shaderData can be stripped out to achieve shared materials, i.e. two renderer shares one material, although the same shader must be controlled, but the upload of this part of the shader data comes from the shaderData of the two renderers, it will not affect each other's rendering results.</p>\n<p>i.e.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> renderer1ShaderData <span class=\"token operator\">=</span> renderer1<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> renderer2ShaderData <span class=\"token operator\">=</span> renderer2<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> materialShaderData <span class=\"token operator\">=</span> material<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">;</span>\n\nmaterialShaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_color\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrenderer1ShaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_progross\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrenderer2ShaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_progross\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"interface-in-shaderdata\" style=\"position:relative;\"><a href=\"#interface-in-shaderdata\" aria-label=\"interface in shaderdata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interface in shaderData</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Shader type</th>\n<th align=\"left\">ShaderData API</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code>bool</code> 、 <code>int</code></td>\n<td align=\"left\">setInt( value: number )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>float</code></td>\n<td align=\"left\">setFloat( value: number )`</td>\n</tr>\n<tr>\n<td align=\"left\"><code>bvec2</code>、<code>ivec2</code>、<code>vec2</code></td>\n<td align=\"left\">setVector2( value:Vector2 )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>bvec3</code>、<code>ivec3</code>、<code>vec3</code></td>\n<td align=\"left\">setVector3( value:Vector3 )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>bvec4</code>、<code>ivec4</code>、<code>vec4</code></td>\n<td align=\"left\">setVector4( value:Vector4 )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>mat4</code></td>\n<td align=\"left\">setMatrix( value:Matrix )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>float[]</code> 、<code>vec2[]</code> 、<code>vec3[]</code>、 <code>vec4[]</code> 、<code>mat4[]</code></td>\n<td align=\"left\">setFloatArray( value:Float32Array )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>bool[]</code>、 <code>int[]</code> 、<code>bvec2[]</code>、 <code>bvec3[]</code> 、<code>bvec4[]</code>、 <code>ivec2[]</code>、 <code>ivec3[]</code> 、<code>ivec4[]</code></td>\n<td align=\"left\">setIntArray( value:Int32Array )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>sampler2D</code> 、 <code>samplerCube</code></td>\n<td align=\"left\">setTexture( value:Texture )</td>\n</tr>\n<tr>\n<td align=\"left\"><code>sampler2D[]</code> 、 <code>samplerCube[]</code></td>\n<td align=\"left\">setTextureArray( value:Texture[] )</td>\n</tr>\n</tbody>\n</table>\n<p>The code demo is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// shader\n\nuniform float u_float;\nuniform int u_int;\nuniform bool u_bool;\nuniform vec2 u_vec2;\nuniform vec3 u_vec3;\nuniform vec4 u_vec4;\nuniform mat4 u_matrix;\nuniform int u_intArray[10];\nuniform float u_floatArray[10];\nuniform sampler2D u_sampler2D;\nuniform samplerCube u_samplerCube;\nuniform sampler2D u_samplerArray[2];\n\n// GLSL 300:\n// in float u_float;\n// ...</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// ShaderData can be saved separately in Scene, Camera, Renderer, Material.</span>\n<span class=\"token keyword\">const</span> shaderData <span class=\"token operator\">=</span> material<span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">;</span>\n\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_float\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_int\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_bool\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setVector2</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_vec2\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector2</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setVector3</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_vec3\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setVector4</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_vec4\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setMatrix</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_matrix\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Matrix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setIntArray</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_intArray\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Int32Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setFloatArray</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_floatArray\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Float32Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setTexture</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_sampler2D\"</span><span class=\"token punctuation\">,</span> texture2D<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setTexture</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_samplerCube\"</span><span class=\"token punctuation\">,</span> textureCube<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setTextureArray</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_samplerArray\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>texture2D<span class=\"token punctuation\">,</span> textureCube<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><strong>Note</strong>: For performance, the engine does not support struct arrays or upload a single element of the array</p>\n</blockquote>\n<h3 id=\"macro-switch\" style=\"position:relative;\"><a href=\"#macro-switch\" aria-label=\"macro switch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Macro switch</h3>\n<p>In addition to uniform variables, the engine also regards <a href=\"https://www.wikiwand.com/en/OpenGL_Shading_Language\">macro definition</a> in the shader as a variable, because the enable/disable of the macro definition will generate different shaders variations, it will also affect the rendering results.</p>\n<p>For example, these macros have been related to Shader:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#ifdef DISCARD\n\tdiscard;\n#endif\n\n#ifdef LIGHT_COUNT\n\tuniform vec4 u_color[ LIGHT_COUNT ];\n#endif</code></pre></div>\n<p>Then use <code>enableMacro</code> and <code>disableMacro</code> in <a href=\"/0.5/api/core/Shader#enableMacro\">ShaderData</a> to control marco:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Open macro switch</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">enableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCARD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Close macro switch</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">disableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCARD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Open variable macro</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">enableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LIGHT_COUNT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Switch variable macro. Here, the bottom layer will automatically disable \"Light_Count 3\" above.</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">enableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LIGHT_COUNT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Close variable macro</span>\nshaderData<span class=\"token punctuation\">.</span><span class=\"token function\">disableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LIGHT_COUNT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"rendering-state\" style=\"position:relative;\"><a href=\"#rendering-state\" aria-label=\"rendering state permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering state</h2>\n<p>We determine the rendering result by the four block of shaderData of the material. However, in addition to the operation of the shader, the rendering pipeline also provides some rendering states to enable us to perform some additional configuration and processing of programmable input and output. Therefore, the engine provides <a href=\"/0.5/api/core/RenderState\">RenderState</a>, which can be used for <a href=\"/0.5/api/core/RenderState#BlendState\">BlendState</a>, <a href=\"/0.5/api/core/RenderState#DepthState\">DepthState</a>, <a href=\"/0.5/api/core/RenderState#StencilState\">StencilState</a>, <a href=\"/0.5/api/core/RenderState#RasterState\">RasterState</a> for configuration. Let's take a standard rendering process of a transparent model as an example. We want to turn on the blending mode and set the blending factor, because the transparent object is rendered by overlay, we also need to disable the depth writing;</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> renderState <span class=\"token operator\">=</span> material<span class=\"token punctuation\">.</span>renderState<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 1. Set color mixing factor.</span>\n<span class=\"token keyword\">const</span> blendState <span class=\"token operator\">=</span> renderState<span class=\"token punctuation\">.</span>blendState<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> blendState<span class=\"token punctuation\">.</span>targetBlendState<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// src factor:（As，As，As，As）.</span>\ntarget<span class=\"token punctuation\">.</span>sourceColorBlendFactor <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>sourceAlphaBlendFactor <span class=\"token operator\">=</span> BlendFactor<span class=\"token punctuation\">.</span>SourceAlpha<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// dst factor: (As，1 - As，1 - As，1 - As）.</span>\ntarget<span class=\"token punctuation\">.</span>destinationColorBlendFactor <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>destinationAlphaBlendFactor <span class=\"token operator\">=</span> BlendFactor<span class=\"token punctuation\">.</span>OneMinusSourceAlpha<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// operation: src + dst  */</span>\ntarget<span class=\"token punctuation\">.</span>colorBlendOperation <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>alphaBlendOperation <span class=\"token operator\">=</span> BlendOperation<span class=\"token punctuation\">.</span>Add<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 2. Open color mix</span>\ntarget<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 3. Disable depth wirting</span>\n<span class=\"token keyword\">const</span> depthState <span class=\"token operator\">=</span> renderState<span class=\"token punctuation\">.</span>depthState<span class=\"token punctuation\">;</span>\ndepthState<span class=\"token punctuation\">.</span>writeEnabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 4. Set the rendering queue as transparent</span>\nmaterial<span class=\"token punctuation\">.</span>renderQueueType <span class=\"token operator\">=</span> RenderQueueType<span class=\"token punctuation\">.</span>Transparent<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For more options about the rendering state, please refer to the corresponding <a href=\"/0.5/api/core/RenderState\">API document</a></p>\n<h2 id=\"rendering-queue\" style=\"position:relative;\"><a href=\"#rendering-queue\" aria-label=\"rendering queue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering queue</h2>\n<p>So far, the custom material has been very perfect, but maybe we need to do some processing on the rendering order of the objects. For example, the transparent objects is generally rendered behind the opaque queue. Therefore, the engine provides <a href=\"/0.5/api/core/RenderQueueType\">RenderQueueType</a>, the rendering queue of the material can determine the rendering order of this material in the current scene, and the bottom layer of the engine will perform some special processing on the rendering queue of different ranges, such as <a href=\"/0.5/api/core/RenderQueueType#transparent\">RenderQueueType.Transparent</a> will render <strong>from far to near</strong>. It is worth noting that the value of the render queue can be an enumerated value plus any custom number.</p>\n<p>i.e.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">material<span class=\"token punctuation\">.</span>renderQueueType <span class=\"token operator\">=</span> RenderQueueType<span class=\"token punctuation\">.</span>Opaque <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"package-custom-material\" style=\"position:relative;\"><a href=\"#package-custom-material\" aria-label=\"package custom material permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Package custom material</h2>\n<p>This part of the content is a combination of all the above content, to give users a simple packaging example, hope it will be helpful to you:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Material<span class=\"token punctuation\">,</span> Shader<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">,</span> Texture2D<span class=\"token punctuation\">,</span> BlendFactor<span class=\"token punctuation\">,</span> RenderQueueType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"oasis-engine\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//-- Shader</span>\n<span class=\"token keyword\">const</span> vertexSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  uniform mat4 u_MVPMat;\n\n  attribute vec3 POSITION; \n  attribute vec2 TEXCOORD_0;\n  varying vec2 v_uv;\n\n  void main() {\n    gl_Position = u_MVPMat * vec4(POSITION, 1.0);\n    v_uv = TEXCOORD_0;\n  }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fragmentSource <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  uniform vec4 u_color;\n  varying vec2 v_uv;\n\n  #ifdef TEXTURE\n    uniform sampler2D u_texture;\n  #endif\n\n  void main() {\n    vec4 color = u_color;\n\n    #ifdef TEXTURE\n      color *= texture2D(u_texture, v_uv);\n    #endif\n\n    gl_FragColor = color;\n\n  }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\nShader<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"demo\"</span><span class=\"token punctuation\">,</span> vertexSource<span class=\"token punctuation\">,</span> fragmentSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomMaterial</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Material</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> Texture2D<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">enableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TEXTURE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setTexture</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_texture\"</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">disableMacro</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TEXTURE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">set</span> <span class=\"token function\">color</span><span class=\"token punctuation\">(</span>val<span class=\"token operator\">:</span> Color<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shaderData<span class=\"token punctuation\">.</span><span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"u_color\"</span><span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// make it transparent</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">transparent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderState<span class=\"token punctuation\">.</span>blendState<span class=\"token punctuation\">.</span>targetBlendState<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> depthState <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderState<span class=\"token punctuation\">.</span>depthState<span class=\"token punctuation\">;</span>\n\n    target<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    target<span class=\"token punctuation\">.</span>sourceColorBlendFactor <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>sourceAlphaBlendFactor <span class=\"token operator\">=</span> BlendFactor<span class=\"token punctuation\">.</span>SourceAlpha<span class=\"token punctuation\">;</span>\n    target<span class=\"token punctuation\">.</span>destinationColorBlendFactor <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>destinationAlphaBlendFactor <span class=\"token operator\">=</span> BlendFactor<span class=\"token punctuation\">.</span>OneMinusSourceAlpha<span class=\"token punctuation\">;</span>\n    depthState<span class=\"token punctuation\">.</span>writeEnabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderQueueType <span class=\"token operator\">=</span> RenderQueueType<span class=\"token punctuation\">.</span>Transparent<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>engine<span class=\"token operator\">:</span> Engine<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">,</span> Shader<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"demo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There may be some special rendering requirements, such as water flow, and this time you need "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"custom material"}]},{"type":"text","value":" to achieve. By using "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Material"},"children":[{"type":"text","value":"Material"}]},{"type":"text","value":" and "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Shader"},"children":[{"type":"text","value":"Shader"}]},{"type":"text","value":", you can integrate your own shader code into the engine rendering process."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"playground","properties":{"name":"shader-water.ts"},"children":[{"type":"element","tagName":"textarea","properties":{},"children":[{"type":"text","value":"/**\n * @title Shader Water\n * @category Material\n */\nimport { OrbitControl } from \"@oasis-engine/controls\";\nimport * as dat from \"dat.gui\";\nimport {\n  AssetType,\n  Camera,\n  Color,\n  Engine,\n  Material,\n  MeshRenderer,\n  PrimitiveMesh,\n  Script,\n  Shader,\n  Texture2D,\n  Vector3,\n  WebGLEngine\n} from \"oasis-engine\";\n\nconst gui = new dat.GUI();\n//-- create engine object\nconst engine = new WebGLEngine(\"canvas\");\nengine.canvas.resizeByClientSize();\n\nconst scene = engine.sceneManager.activeScene;\nconst rootEntity = scene.createRootEntity();\n\n//-- create camera\nconst cameraEntity = rootEntity.createChild(\"camera_entity\");\ncameraEntity.transform.position = new Vector3(0, 0, 15);\ncameraEntity.addComponent(Camera);\nconst orbitControl = cameraEntity.addComponent(OrbitControl);\norbitControl.minDistance = 15;\norbitControl.maxDistance = 15;\n\n// 自定义材质\nconst vertexSource = `\nuniform mat4 u_MVPMat;\nattribute vec3 POSITION;\nattribute vec2 TEXCOORD_0;\nattribute vec3 NORMAL;\n\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\n\nvoid main() {\n\n  gl_Position = u_MVPMat  *  vec4( POSITION, 1.0 );\n  v_uv = TEXCOORD_0;\n  v_normal = NORMAL;\n  v_position = POSITION;\n}\n `;\n\nconst fragSource = `\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nuniform float u_time;\nuniform sampler2D u_texture;\nuniform vec3 u_cameraPos;\n\n#define EPS 0.001\n#define MAX_ITR 100\n#define MAX_DIS 100.0\n#define PI\t \t  3.141592\n\nuniform float u_water_scale;\nuniform float u_water_speed;\n\nuniform vec3 u_sea_base;\nuniform vec3 u_water_color;\nuniform float u_sea_height;\n\n// Distance Functions\nfloat sd_sph(vec3 p, float r) { return length(p) - r; }\n\n// Distance Map\nfloat map(vec3 p, vec2 sc)\n{    \n    float l = cos(length(p * 2.0));\n    vec2 u = vec2(l, sc.y);\n    vec2 um = u * 0.3;\n    um.x += u_time * 0.1 * u_water_speed;\n    um.y += -u_time * 0.025 * u_water_speed;\n    um.x += (um.y) * 2.0;    \n    float a1 = texture2D(u_texture, (p.yz  *  .4 + um) * u_water_scale).x;\n    float a2 = texture2D(u_texture, (p.zx  *  .4 + um) * u_water_scale).x;\n    float a3 = texture2D(u_texture, (p.xy  *  .4 + um) * u_water_scale).x;\n    \n    float t1 = a1 + a2 + a3;\n    t1 /= 15.0 * u_water_scale;\n    \n    float b1 = texture2D(u_texture, (p.yz  *  1. + u) * u_water_scale).x;\n    float b2 = texture2D(u_texture, (p.zx  *  1. + u) * u_water_scale).x;\n    float b3 = texture2D(u_texture, (p.xy  *  1. + u) * u_water_scale).x;\n    \n    float t2 = b1 + b2 + b3;\n    t2 /= 15.0  *  u_water_scale;\n    \n    float comb = t1 * 0.4 + t2 * 0.1 * (1.0 - t1);\n    \n    return comb + sd_sph(p, 3.); // sd_box(p, vec3(1., 1., 1.)) + sdPlane(p, vec4(0., 0., 1.0, 0.));//\n}\n\nfloat diffuse(vec3 n,vec3 l,float p) {\n    return pow(dot(n,l) * 0.4 + 0.6,p);\n}\n\nfloat specular(vec3 n,vec3 l,vec3 e,float s) {    \n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;\n}\n\n// sky\nvec3 getSkyColor(vec3 e) {\n    e.y = max(e.y,0.0);\n    return vec3(pow(1.0-e.y,2.0), 1.0-e.y, 0.6+(1.0-e.y)*0.4);\n}\n\nvec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {  \n    float fresnel = clamp(1.0 - dot(n,-eye), 0.0, 1.0);\n    fresnel = pow(fresnel,3.0) * 0.65;\n\n    vec3 reflected = getSkyColor(reflect(eye,n));    \n    vec3 refracted = u_sea_base + diffuse(normalize(n),l,80.0) * u_water_color * 0.12; \n\n    vec3 color =  mix(refracted,reflected,fresnel);\n\n    float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);\n    color += u_water_color * (length(p) - u_sea_height) * 0.18 * atten; // \n\n    color += vec3(specular(n,l,eye,20.0));\n\n    return color;\n}\n\nvoid main (void) {\n\n    vec2 uv = vec2(v_uv.x * 0.5, v_uv.y * 0.5);//  / iResolution.xy;\n    \n    vec3 pos = v_position; \n    vec3 dist = pos - u_cameraPos;\n\n    float dis = EPS;\n    vec3 rayDir = normalize(dist);\n    \n    // Ray marching\n    for(int i = 0; i < MAX_ITR; i++)\n    {\n        if(dis < EPS || dis > MAX_DIS)\n          break;\n        dis = map(pos, uv);\n        pos += dis * rayDir;\n    }\n    \n    if (dis >= EPS) \n    {\n      discard;\n    }\n    \n    vec3 lig = normalize(vec3(-1., -3, -4.5));\n    vec2 eps = vec2(0.0, EPS);\n    vec3 normal = normalize(vec3(\n        map(pos + eps.yxx, uv) - map(pos - eps.yxx, uv),\n        map(pos + eps.xyx, uv) - map(pos - eps.xyx, uv),\n        map(pos + eps.xxy, uv) - map(pos - eps.xxy, uv)\n    ));\n    \n    vec3 col = getSeaColor(pos, normal, lig, rayDir, dist);\n    \n    gl_FragColor = vec4(col,1.0);\n}\n`;\n\n// 初始化 shader\nShader.create(\"water\", vertexSource, fragSource);\n\nclass ShaderMaterial extends Material {\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"water\"));\n\n    this.shaderData.setFloat(\"u_sea_height\", 0.6);\n    this.shaderData.setFloat(\"u_water_scale\", 0.2);\n    this.shaderData.setFloat(\"u_water_speed\", 3.5);\n    this.shaderData.setColor(\"u_sea_base\", new Color(0.1, 0.2, 0.22));\n    this.shaderData.setColor(\"u_water_color\", new Color(0.8, 0.9, 0.6));\n  }\n}\nconst material = new ShaderMaterial(engine);\n\n// 创建球体形的海面\nconst sphereEntity = rootEntity.createChild(\"sphere\");\nconst renderer = sphereEntity.addComponent(MeshRenderer);\nrenderer.mesh = PrimitiveMesh.createSphere(engine, 3, 50);\nrenderer.setMaterial(material);\n\n// 加载噪声纹理\nengine.resourceManager\n  .load({\n    type: AssetType.Texture2D,\n    url: \"https://gw.alipayobjects.com/mdn/rms_7c464e/afts/img/A*AC4IQZ6mfCIAAAAAAAAAAAAAARQnAQ\"\n  })\n  .then((texture: Texture2D) => {\n    material.shaderData.setTexture(\"u_texture\", texture);\n    engine.run();\n  });\n\n// u_time 更新脚本\nclass WaterScript extends Script {\n  onUpdate() {\n    material.shaderData.setFloat(\"u_time\", engine.time.timeSinceStartup * 0.001);\n  }\n}\nsphereEntity.addComponent(WaterScript);\n\n// debug\nfunction openDebug() {\n  const shaderData = material.shaderData;\n  const baseColor = shaderData.getColor(\"u_sea_base\");\n  const waterColor = shaderData.getColor(\"u_water_color\");\n  const debug = {\n    sea_height: shaderData.getFloat(\"u_sea_height\"),\n    water_scale: shaderData.getFloat(\"u_water_scale\"),\n    water_speed: shaderData.getFloat(\"u_water_speed\"),\n    sea_base: [baseColor.r * 255, baseColor.g * 255, baseColor.b * 255],\n    water_color: [waterColor.r * 255, waterColor.g * 255, waterColor.b * 255]\n  };\n\n  gui.add(debug, \"sea_height\", 0, 3).onChange((v) => {\n    shaderData.setFloat(\"u_sea_height\", v);\n  });\n  gui.add(debug, \"water_scale\", 0, 4).onChange((v) => {\n    shaderData.setFloat(\"u_water_scale\", v);\n  });\n  gui.add(debug, \"water_speed\", 0, 4).onChange((v) => {\n    shaderData.setFloat(\"u_water_speed\", v);\n  });\n  gui.addColor(debug, \"sea_base\").onChange((v) => {\n    baseColor.r = v[0] / 255;\n    baseColor.g = v[1] / 255;\n    baseColor.b = v[2] / 255;\n  });\n  gui.addColor(debug, \"water_color\").onChange((v) => {\n    waterColor.r = v[0] / 255;\n    waterColor.g = v[1] / 255;\n    waterColor.b = v[2] / 255;\n  });\n}\n\nopenDebug();\n"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n * @title Shader Water\n * @category Material\n */"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" OrbitControl "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"@oasis-engine/controls\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"as"}]},{"type":"text","value":" dat "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"dat.gui\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  AssetType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Camera"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  MeshRenderer"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  PrimitiveMesh"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Script"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  Vector3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  WebGLEngine\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"oasis-engine\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" gui "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"dat"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"GUI"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//-- create engine object"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" engine "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WebGLEngine"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"canvas\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nengine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"canvas"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"resizeByClientSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" scene "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"sceneManager"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"activeScene"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" rootEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" scene"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createRootEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//-- create camera"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cameraEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" rootEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createChild"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"camera_entity\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\ncameraEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"transform"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"position "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"15"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\ncameraEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Camera"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" orbitControl "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" cameraEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"OrbitControl"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\norbitControl"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"minDistance "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"15"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\norbitControl"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"maxDistance "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"15"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 自定义材质"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" vertexSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\nuniform mat4 u_MVPMat;\nattribute vec3 POSITION;\nattribute vec2 TEXCOORD_0;\nattribute vec3 NORMAL;\n\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\n\nvoid main() {\n\n  gl_Position = u_MVPMat  *  vec4( POSITION, 1.0 );\n  v_uv = TEXCOORD_0;\n  v_normal = NORMAL;\n  v_position = POSITION;\n}\n "}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" fragSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\nvarying vec2 v_uv;\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nuniform float u_time;\nuniform sampler2D u_texture;\nuniform vec3 u_cameraPos;\n\n#define EPS 0.001\n#define MAX_ITR 100\n#define MAX_DIS 100.0\n#define PI\t \t  3.141592\n\nuniform float u_water_scale;\nuniform float u_water_speed;\n\nuniform vec3 u_sea_base;\nuniform vec3 u_water_color;\nuniform float u_sea_height;\n\n// Distance Functions\nfloat sd_sph(vec3 p, float r) { return length(p) - r; }\n\n// Distance Map\nfloat map(vec3 p, vec2 sc)\n{    \n    float l = cos(length(p * 2.0));\n    vec2 u = vec2(l, sc.y);\n    vec2 um = u * 0.3;\n    um.x += u_time * 0.1 * u_water_speed;\n    um.y += -u_time * 0.025 * u_water_speed;\n    um.x += (um.y) * 2.0;    \n    float a1 = texture2D(u_texture, (p.yz  *  .4 + um) * u_water_scale).x;\n    float a2 = texture2D(u_texture, (p.zx  *  .4 + um) * u_water_scale).x;\n    float a3 = texture2D(u_texture, (p.xy  *  .4 + um) * u_water_scale).x;\n    \n    float t1 = a1 + a2 + a3;\n    t1 /= 15.0 * u_water_scale;\n    \n    float b1 = texture2D(u_texture, (p.yz  *  1. + u) * u_water_scale).x;\n    float b2 = texture2D(u_texture, (p.zx  *  1. + u) * u_water_scale).x;\n    float b3 = texture2D(u_texture, (p.xy  *  1. + u) * u_water_scale).x;\n    \n    float t2 = b1 + b2 + b3;\n    t2 /= 15.0  *  u_water_scale;\n    \n    float comb = t1 * 0.4 + t2 * 0.1 * (1.0 - t1);\n    \n    return comb + sd_sph(p, 3.); // sd_box(p, vec3(1., 1., 1.)) + sdPlane(p, vec4(0., 0., 1.0, 0.));//\n}\n\nfloat diffuse(vec3 n,vec3 l,float p) {\n    return pow(dot(n,l) * 0.4 + 0.6,p);\n}\n\nfloat specular(vec3 n,vec3 l,vec3 e,float s) {    \n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;\n}\n\n// sky\nvec3 getSkyColor(vec3 e) {\n    e.y = max(e.y,0.0);\n    return vec3(pow(1.0-e.y,2.0), 1.0-e.y, 0.6+(1.0-e.y)*0.4);\n}\n\nvec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {  \n    float fresnel = clamp(1.0 - dot(n,-eye), 0.0, 1.0);\n    fresnel = pow(fresnel,3.0) * 0.65;\n\n    vec3 reflected = getSkyColor(reflect(eye,n));    \n    vec3 refracted = u_sea_base + diffuse(normalize(n),l,80.0) * u_water_color * 0.12; \n\n    vec3 color =  mix(refracted,reflected,fresnel);\n\n    float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);\n    color += u_water_color * (length(p) - u_sea_height) * 0.18 * atten; // \n\n    color += vec3(specular(n,l,eye,20.0));\n\n    return color;\n}\n\nvoid main (void) {\n\n    vec2 uv = vec2(v_uv.x * 0.5, v_uv.y * 0.5);//  / iResolution.xy;\n    \n    vec3 pos = v_position; \n    vec3 dist = pos - u_cameraPos;\n\n    float dis = EPS;\n    vec3 rayDir = normalize(dist);\n    \n    // Ray marching\n    for(int i = 0; i < MAX_ITR; i++)\n    {\n        if(dis < EPS || dis > MAX_DIS)\n          break;\n        dis = map(pos, uv);\n        pos += dis * rayDir;\n    }\n    \n    if (dis >= EPS) \n    {\n      discard;\n    }\n    \n    vec3 lig = normalize(vec3(-1., -3, -4.5));\n    vec2 eps = vec2(0.0, EPS);\n    vec3 normal = normalize(vec3(\n        map(pos + eps.yxx, uv) - map(pos - eps.yxx, uv),\n        map(pos + eps.xyx, uv) - map(pos - eps.xyx, uv),\n        map(pos + eps.xxy, uv) - map(pos - eps.xxy, uv)\n    ));\n    \n    vec3 col = getSeaColor(pos, normal, lig, rayDir, dist);\n    \n    gl_FragColor = vec4(col,1.0);\n}\n"}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 初始化 shader"}]},{"type":"text","value":"\nShader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"water\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" vertexSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" fragSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShaderMaterial"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Material"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Engine"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"super"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"find"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"water\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sea_height\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.6"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_scale\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_speed\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3.5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sea_base\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Color"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.22"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_color\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Color"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.8"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.9"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.6"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" material "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShaderMaterial"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 创建球体形的海面"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" sphereEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" rootEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createChild"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sphere\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" renderer "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" sphereEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"MeshRenderer"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrenderer"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"mesh "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" PrimitiveMesh"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createSphere"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"50"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrenderer"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setMaterial"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 加载噪声纹理"}]},{"type":"text","value":"\nengine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"resourceManager\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"load"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    type"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" AssetType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"Texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    url"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"https://gw.alipayobjects.com/mdn/rms_7c464e/afts/img/A*AC4IQZ6mfCIAAAAAAAAAAAAAARQnAQ\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"then"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"texture"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Texture2D"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setTexture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_texture\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" texture"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// u_time 更新脚本"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WaterScript"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Script"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onUpdate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_time\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"time"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"timeSinceStartup "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.001"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\nsphereEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"WaterScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// debug"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"openDebug"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" shaderData "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" baseColor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sea_base\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" waterColor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_color\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" debug "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    sea_height"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sea_height\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    water_scale"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_scale\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    water_speed"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_speed\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    sea_base"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"r "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"g "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    water_color"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"r "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"g "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  gui"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"debug"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sea_height\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onChange"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"v"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sea_height\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  gui"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"debug"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"water_scale\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onChange"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"v"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_scale\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  gui"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"debug"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"water_speed\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onChange"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"v"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_water_speed\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  gui"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"debug"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sea_base\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onChange"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"v"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"r "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"g "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    baseColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  gui"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"debug"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"water_color\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"onChange"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"v"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"r "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"g "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    waterColor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" v"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"openDebug"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"create-shader","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-shader","ariaLabel":"create shader permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Create shader"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Shader"},"children":[{"type":"text","value":"Shader"}]},{"type":"text","value":" encapsulates vertex shaders, fragment shaders, shader pre-compilation, platform precision, and platform differences. It is very convenient to create and use. Users only need to pay attention to the shader algorithm itself, and don't have to worry about what precision is used, or which version of GLSL is written. Here is a simple demo:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"javascript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" Material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Color "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"oasis-engine\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//-- Shader"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" vertexSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\n  uniform mat4 u_MVPMat;\n\n  attribute vec3 POSITION; \n\n  void main() {\n    gl_Position = u_MVPMat * vec4(POSITION, 1.0);\n  }\n  "}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" fragmentSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\n  uniform vec4 u_color;\n\n  void main() {\n    gl_FragColor = u_color;\n  }\n  "}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// create shader (only needs to be created once in the whole runtime )"}]},{"type":"text","value":"\nShader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"demo\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" vertexSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" fragmentSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// create custom material"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" material "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Material"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"find"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"demo\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Shader.create()"}]},{"type":"text","value":" is used to add the shader to the cache pool of the engine, so the entire runtime only needs to be created once, and then you can pass "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Shader#find"},"children":[{"type":"text","value":"Shader.find(name)"}]},{"type":"text","value":" to use repeatedly. "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note: The engine has pre-created blinn-phong, pbr, shadow-map, shadow, skybox, framebuffer-picker-color, and trail. Users can directly use these built-in shaders, but cannot create them with the same name."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Because we don't have uploaded "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"u_color"}]},{"type":"text","value":" variable, the fragment output is still black (uniform has default value), let's introduce the built-in shader variable in the engine and how to upload a custom variable."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"built-in-shader-variables","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#built-in-shader-variables","ariaLabel":"built in shader variables permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Built-in shader variables"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the above, we gave the material a shader, this time the program can start rendering. It should be noted that there are two kinds of variables in the shader, one is the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"attribute"}]},{"type":"text","value":" variable which is "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"per vertex"}]},{"type":"text","value":", and the other is the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"uniform"}]},{"type":"text","value":" variable which is "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"per shader"}]},{"type":"text","value":" (After GLSL300, they are unified as "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" variables). The engine has automatically uploaded some commonly used variables, and users can directly use them in the shader code, such as vertex data and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mvp"}]},{"type":"text","value":" data. The following are the variables uploaded by the engine by default."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"attribute data"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"attribute name"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"type of data"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vertex data"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"POSITION"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec3"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"normal data"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"NORMAL"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec3"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"tangent data"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"TANGENT"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vertex color"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"COLOR_0"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"skeleton index"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"JOINTS_0"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"skeleton weight"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"WEIGHTS_0"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"fist uv coordinates"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"TEXCOORD_0"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec2"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"Second uv coordinates"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"TEXCOORD_1"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec2"}]}]}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"uniform data"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"uniform name"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"type of data"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"canvas resolution"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_resolution"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec2"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"viewport matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_viewMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"projection matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_projMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"viewport projection matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_VPMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"viewport inverse matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_viewInvMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"projection inverse matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_projInvMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"camera position"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_cameraPos"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"vec3"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"model local coordinate system matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_localMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"model world Coordinate System Matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_modelMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"model viewport matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_MVMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"model viewport projection matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_MVPMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"model viewport inverse matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_MVInvMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"normal inverse transpose matrix"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"u_normalMat"}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"mat4"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"upload-shader-variables","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#upload-shader-variables","ariaLabel":"upload shader variables permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Upload shader variables"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Please refer to "},{"type":"element","tagName":"a","properties":{"href":"/0.5/docs/mesh-renderer"},"children":[{"type":"text","value":"Mesh Renderer"}]},{"type":"text","value":" for uploading attribute data, won’t repeat it here."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In addition to the built-in variables, we can upload any variable with a custom name in the shader (it is recommended to use u_**, v_** to represent uniform and varying variables respectively), the only thing we have to do is using the correct interface according to the shader variable type. The upload interface is all in "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/ShaderData"},"children":[{"type":"text","value":"ShaderData"}]},{"type":"text","value":", and the shaderData instance objects are saved in the four categories "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Scene"},"children":[{"type":"text","value":"Scene"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Camera"},"children":[{"type":"text","value":"Camera"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Renderer"},"children":[{"type":"text","value":"Renderer"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Material"},"children":[{"type":"text","value":"Material"}]},{"type":"text","value":" of the engine , we only need to call the interface in these shaderData, upload variables, and engine will automatically help us assemble these data at the bottom layer and optimize performance such as judging duplication."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://gw.alipayobjects.com/zos/OasisHub/fc605510-5b14-476f-8c91-03205c623b4b/image-20210722153638785.png","alt":"image-20210722153638785"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"shaderdata-separate-benefits","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shaderdata-separate-benefits","ariaLabel":"shaderdata separate benefits permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"ShaderData separate benefits"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The shaderData are saved in the four categories "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Scene"},"children":[{"type":"text","value":"Scene"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Camera"},"children":[{"type":"text","value":"Camera"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Renderer"},"children":[{"type":"text","value":"Renderer"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Material"},"children":[{"type":"text","value":"Material "}]},{"type":"text","value":" of the engine, one of the benefits is that the bottom layer can upload a block of uniform according to the upload timing to improve performance; in addition, the material-independent shaderData can be stripped out to achieve shared materials, i.e. two renderer shares one material, although the same shader must be controlled, but the upload of this part of the shader data comes from the shaderData of the two renderers, it will not affect each other's rendering results."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"i.e."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" renderer1ShaderData "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" renderer1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" renderer2ShaderData "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" renderer2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" materialShaderData "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\nmaterialShaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_color\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Color"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrenderer1ShaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_progross\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrenderer2ShaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_progross\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.8"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"interface-in-shaderdata","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#interface-in-shaderdata","ariaLabel":"interface in shaderdata permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Interface in shaderData"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"Shader type"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"ShaderData API"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bool"}]},{"type":"text","value":" 、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"int"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setInt( value: number )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"float"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setFloat( value: number )`"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec2"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec2"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec2"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setVector2( value:Vector2 )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec3"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec3"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec3"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setVector3( value:Vector3 )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec4"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec4"}]},{"type":"text","value":"、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec4"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setVector4( value:Vector4 )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mat4"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setMatrix( value:Matrix )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"float[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec2[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec3[]"}]},{"type":"text","value":"、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"vec4[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mat4[]"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setFloatArray( value:Float32Array )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bool[]"}]},{"type":"text","value":"、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"int[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec2[]"}]},{"type":"text","value":"、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec3[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bvec4[]"}]},{"type":"text","value":"、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec2[]"}]},{"type":"text","value":"、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec3[]"}]},{"type":"text","value":" 、"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ivec4[]"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setIntArray( value:Int32Array )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"sampler2D"}]},{"type":"text","value":" 、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"samplerCube"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setTexture( value:Texture )"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"sampler2D[]"}]},{"type":"text","value":" 、 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"samplerCube[]"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"setTextureArray( value:Texture[] )"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The code demo is as follows:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"// shader\n\nuniform float u_float;\nuniform int u_int;\nuniform bool u_bool;\nuniform vec2 u_vec2;\nuniform vec3 u_vec3;\nuniform vec4 u_vec4;\nuniform mat4 u_matrix;\nuniform int u_intArray[10];\nuniform float u_floatArray[10];\nuniform sampler2D u_sampler2D;\nuniform samplerCube u_samplerCube;\nuniform sampler2D u_samplerArray[2];\n\n// GLSL 300:\n// in float u_float;\n// ..."}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ShaderData can be saved separately in Scene, Camera, Renderer, Material."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" shaderData "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_float\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1.5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setInt"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_int\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setInt"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_bool\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setVector2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_vec2\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setVector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_vec3\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setVector4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_vec4\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setMatrix"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_matrix\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Matrix"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setIntArray"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_intArray\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Int32Array"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setFloatArray"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_floatArray\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Float32Array"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setTexture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_sampler2D\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setTexture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_samplerCube\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" textureCube"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setTextureArray"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_samplerArray\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" textureCube"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note"}]},{"type":"text","value":": For performance, the engine does not support struct arrays or upload a single element of the array"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"macro-switch","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#macro-switch","ariaLabel":"macro switch permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Macro switch"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In addition to uniform variables, the engine also regards "},{"type":"element","tagName":"a","properties":{"href":"https://www.wikiwand.com/en/OpenGL_Shading_Language"},"children":[{"type":"text","value":"macro definition"}]},{"type":"text","value":" in the shader as a variable, because the enable/disable of the macro definition will generate different shaders variations, it will also affect the rendering results."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For example, these macros have been related to Shader:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#ifdef DISCARD\n\tdiscard;\n#endif\n\n#ifdef LIGHT_COUNT\n\tuniform vec4 u_color[ LIGHT_COUNT ];\n#endif"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then use "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"enableMacro"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"disableMacro"}]},{"type":"text","value":" in "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/Shader#enableMacro"},"children":[{"type":"text","value":"ShaderData"}]},{"type":"text","value":" to control marco:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Open macro switch"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"DISCARD\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Close macro switch"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"disableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"DISCARD\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Open variable macro"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"LIGHT_COUNT\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"3\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Switch variable macro. Here, the bottom layer will automatically disable \"Light_Count 3\" above."}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"LIGHT_COUNT\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"2\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Close variable macro"}]},{"type":"text","value":"\nshaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"disableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"LIGHT_COUNT\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"rendering-state","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#rendering-state","ariaLabel":"rendering state permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Rendering state"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We determine the rendering result by the four block of shaderData of the material. However, in addition to the operation of the shader, the rendering pipeline also provides some rendering states to enable us to perform some additional configuration and processing of programmable input and output. Therefore, the engine provides "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState"},"children":[{"type":"text","value":"RenderState"}]},{"type":"text","value":", which can be used for "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState#BlendState"},"children":[{"type":"text","value":"BlendState"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState#DepthState"},"children":[{"type":"text","value":"DepthState"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState#StencilState"},"children":[{"type":"text","value":"StencilState"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState#RasterState"},"children":[{"type":"text","value":"RasterState"}]},{"type":"text","value":" for configuration. Let's take a standard rendering process of a transparent model as an example. We want to turn on the blending mode and set the blending factor, because the transparent object is rendered by overlay, we also need to disable the depth writing;"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" renderState "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 1. Set color mixing factor."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" blendState "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" renderState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"blendState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" target "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" blendState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"targetBlendState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// src factor:（As，As，As，As）."}]},{"type":"text","value":"\ntarget"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"sourceColorBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"sourceAlphaBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" BlendFactor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"SourceAlpha"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// dst factor: (As，1 - As，1 - As，1 - As）."}]},{"type":"text","value":"\ntarget"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"destinationColorBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"destinationAlphaBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" BlendFactor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"OneMinusSourceAlpha"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// operation: src + dst  */"}]},{"type":"text","value":"\ntarget"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"colorBlendOperation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"alphaBlendOperation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" BlendOperation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"Add"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 2. Open color mix"}]},{"type":"text","value":"\ntarget"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"enabled "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 3. Disable depth wirting"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" depthState "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" renderState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"depthState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\ndepthState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"writeEnabled "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 4. Set the rendering queue as transparent"}]},{"type":"text","value":"\nmaterial"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderQueueType "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" RenderQueueType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"Transparent"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For more options about the rendering state, please refer to the corresponding "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderState"},"children":[{"type":"text","value":"API document"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"rendering-queue","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#rendering-queue","ariaLabel":"rendering queue permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Rendering queue"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So far, the custom material has been very perfect, but maybe we need to do some processing on the rendering order of the objects. For example, the transparent objects is generally rendered behind the opaque queue. Therefore, the engine provides "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderQueueType"},"children":[{"type":"text","value":"RenderQueueType"}]},{"type":"text","value":", the rendering queue of the material can determine the rendering order of this material in the current scene, and the bottom layer of the engine will perform some special processing on the rendering queue of different ranges, such as "},{"type":"element","tagName":"a","properties":{"href":"/0.5/api/core/RenderQueueType#transparent"},"children":[{"type":"text","value":"RenderQueueType.Transparent"}]},{"type":"text","value":" will render "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"from far to near"}]},{"type":"text","value":". It is worth noting that the value of the render queue can be an enumerated value plus any custom number."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"i.e."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"text","value":"material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderQueueType "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" RenderQueueType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"Opaque "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"package-custom-material","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#package-custom-material","ariaLabel":"package custom material permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Package custom material"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This part of the content is a combination of all the above content, to give users a simple packaging example, hope it will be helpful to you:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" Material"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" BlendFactor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" RenderQueueType "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"oasis-engine\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//-- Shader"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" vertexSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\n  uniform mat4 u_MVPMat;\n\n  attribute vec3 POSITION; \n  attribute vec2 TEXCOORD_0;\n  varying vec2 v_uv;\n\n  void main() {\n    gl_Position = u_MVPMat * vec4(POSITION, 1.0);\n    v_uv = TEXCOORD_0;\n  }\n  "}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" fragmentSource "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\n  uniform vec4 u_color;\n  varying vec2 v_uv;\n\n  #ifdef TEXTURE\n    uniform sampler2D u_texture;\n  #endif\n\n  void main() {\n    vec4 color = u_color;\n\n    #ifdef TEXTURE\n      color *= texture2D(u_texture, v_uv);\n    #endif\n\n    gl_FragColor = color;\n\n  }\n  "}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\nShader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"demo\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" vertexSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" fragmentSource"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomMaterial"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Material"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"texture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"value"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Texture2D"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"value"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"TEXTURE\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setTexture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_texture\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" value"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"else"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"disableMacro"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"TEXTURE\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"color"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"val"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"shaderData"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setColor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"u_color\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" val"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// make it transparent"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"transparent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" target "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"blendState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"targetBlendState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" depthState "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"depthState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"enabled "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"sourceColorBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"sourceAlphaBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" BlendFactor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"SourceAlpha"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"destinationColorBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" target"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"destinationAlphaBlendFactor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" BlendFactor"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"OneMinusSourceAlpha"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    depthState"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"writeEnabled "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"renderQueueType "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" RenderQueueType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"Transparent"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"super"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Shader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"find"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"demo\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]}],"data":{"quirksMode":false}},"tableOfContents":"<ul>\n<li><a href=\"/docs/custom-material/#create-shader\">Create shader</a></li>\n<li><a href=\"/docs/custom-material/#built-in-shader-variables\">Built-in shader variables</a></li>\n<li>\n<p><a href=\"/docs/custom-material/#upload-shader-variables\">Upload shader variables</a></p>\n<ul>\n<li><a href=\"/docs/custom-material/#shaderdata-separate-benefits\">ShaderData separate benefits</a></li>\n<li><a href=\"/docs/custom-material/#interface-in-shaderdata\">Interface in shaderData</a></li>\n<li><a href=\"/docs/custom-material/#macro-switch\">Macro switch</a></li>\n</ul>\n</li>\n<li><a href=\"/docs/custom-material/#rendering-state\">Rendering state</a></li>\n<li><a href=\"/docs/custom-material/#rendering-queue\">Rendering queue</a></li>\n<li><a href=\"/docs/custom-material/#package-custom-material\">Package custom material</a></li>\n</ul>","frontmatter":{"title":"Custom material","order":4,"type":"Resource"},"fields":{"path":"/docs/custom-material.md","slug":"/docs/custom-material","modifiedTime":1631447185146,"source":"https://github.com/oasis-engine/oasis-engine.github.io/blob/0.5/docs/custom-material.md"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Resource Management and Loading","order":null,"type":"Resource","group":null},"fields":{"slug":"/docs/resource-manager","path":"/docs/resource-manager.md"}}},{"node":{"frontmatter":{"title":"RayCast","order":13,"type":"Component","group":null},"fields":{"slug":"/docs/ray","path":"/docs/ray.md"}}},{"node":{"frontmatter":{"title":"射线投射","order":13,"type":"组件","group":null},"fields":{"slug":"/docs/ray-cn","path":"/docs/ray.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Collision Detection","order":12,"type":"Component","group":null},"fields":{"slug":"/docs/collision","path":"/docs/collision.md"}}},{"node":{"frontmatter":{"title":"碰撞检测","order":12,"type":"组件","group":null},"fields":{"slug":"/docs/collision-cn","path":"/docs/collision.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Particle System","order":11,"type":"Component","group":null},"fields":{"slug":"/docs/particle-renderer","path":"/docs/particle-renderer.md"}}},{"node":{"frontmatter":{"title":"粒子系统","order":11,"type":"组件","group":null},"fields":{"slug":"/docs/particle-renderer-cn","path":"/docs/particle-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Animator","order":10,"type":"Component","group":null},"fields":{"slug":"/docs/animator","path":"/docs/animator.md"}}},{"node":{"frontmatter":{"title":"动画控制","order":10,"type":"组件","group":null},"fields":{"slug":"/docs/animator-cn","path":"/docs/animator.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Script","order":9,"type":"Component","group":null},"fields":{"slug":"/docs/script","path":"/docs/script.md"}}},{"node":{"frontmatter":{"title":"脚本","order":9,"type":"组件","group":null},"fields":{"slug":"/docs/script-cn","path":"/docs/script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"SpriteMask","order":8.1,"type":"Component","group":null},"fields":{"slug":"/docs/sprite-mask","path":"/docs/sprite-mask.md"}}},{"node":{"frontmatter":{"title":"精灵遮罩","order":8.1,"type":"组件","group":null},"fields":{"slug":"/docs/sprite-mask-cn","path":"/docs/sprite-mask.zh-CN.md"}}},{"node":{"frontmatter":{"title":"SpriteRenderer","order":8,"type":"Component","group":null},"fields":{"slug":"/docs/sprite-renderer","path":"/docs/sprite-renderer.md"}}},{"node":{"frontmatter":{"title":"精灵渲染器","order":8,"type":"组件","group":null},"fields":{"slug":"/docs/sprite-renderer-cn","path":"/docs/sprite-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Basic geometry","order":7,"type":"Component","group":null},"fields":{"slug":"/docs/primitive-mesh","path":"/docs/primitive-mesh.md"}}},{"node":{"frontmatter":{"title":"基础几何体","order":7,"type":"组件","group":null},"fields":{"slug":"/docs/primitive-mesh-cn","path":"/docs/primitive-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Buffer Mesh","order":6,"type":"Component","group":null},"fields":{"slug":"/docs/buffer-mesh","path":"/docs/buffer-mesh.md"}}},{"node":{"frontmatter":{"title":"Buffer Mesh","order":6,"type":"组件","group":null},"fields":{"slug":"/docs/buffer-mesh-cn","path":"/docs/buffer-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"资产库","order":6,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-asset-store-cn","path":"/docs/editor-asset-store.zh-CN.md"}}},{"node":{"frontmatter":{"title":"添加组件","order":6,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-component-cn","path":"/docs/editor-component.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Model Mesh","order":5,"type":"Component","group":null},"fields":{"slug":"/docs/model-mesh","path":"/docs/model-mesh.md"}}},{"node":{"frontmatter":{"title":"Clone","order":5,"type":"Core","group":null},"fields":{"slug":"/docs/entity-clone","path":"/docs/entity-clone.md"}}},{"node":{"frontmatter":{"title":"glTF Resource","order":5,"type":"Resource","group":null},"fields":{"slug":"/docs/gltf","path":"/docs/gltf.md"}}},{"node":{"frontmatter":{"title":"克隆","order":5,"type":"核心","group":null},"fields":{"slug":"/docs/entity-clone-cn","path":"/docs/entity-clone.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Model Mesh","order":5,"type":"组件","group":null},"fields":{"slug":"/docs/model-mesh-cn","path":"/docs/model-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"上传资产","order":5,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-assets-panel-cn","path":"/docs/editor-assets-panel.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Spine","order":5,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-resource-spine-cn","path":"/docs/editor-resource-spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"glTF 资源","order":5,"type":"资源系统","group":null},"fields":{"slug":"/docs/gltf-cn","path":"/docs/gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"MeshRenderer","order":4,"type":"Component","group":null},"fields":{"slug":"/docs/mesh-renderer","path":"/docs/mesh-renderer.md"}}},{"node":{"frontmatter":{"title":"Entities and components","order":4,"type":"Core","group":null},"fields":{"slug":"/docs/entity","path":"/docs/entity.md"}}},{"node":{"frontmatter":{"title":"4. First game","order":4,"type":"Introduction","group":null},"fields":{"slug":"/docs/first-game","path":"/docs/first-game.md"}}},{"node":{"frontmatter":{"title":"Custom material","order":4,"type":"Resource","group":null},"fields":{"slug":"/docs/custom-material","path":"/docs/custom-material.md"}}},{"node":{"frontmatter":{"title":"Lottie","order":4,"type":"Second party packages","group":null},"fields":{"slug":"/docs/lottie","path":"/docs/lottie.md"}}},{"node":{"frontmatter":{"title":"Lottie","order":4,"type":"二方库","group":null},"fields":{"slug":"/docs/lottie-cn","path":"/docs/lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"4. 第一个游戏","order":4,"type":"入门","group":null},"fields":{"slug":"/docs/first-game-cn","path":"/docs/first-game.zh-CN.md"}}},{"node":{"frontmatter":{"title":"实体与组件","order":4,"type":"核心","group":null},"fields":{"slug":"/docs/entity-cn","path":"/docs/entity.zh-CN.md"}}},{"node":{"frontmatter":{"title":"网格渲染器","order":4,"type":"组件","group":null},"fields":{"slug":"/docs/mesh-renderer-cn","path":"/docs/mesh-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"检查器","order":4,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-inspector-cn","path":"/docs/editor-inspector.zh-CN.md"}}},{"node":{"frontmatter":{"title":"材质","order":4,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-material-cn","path":"/docs/editor-material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"AE && lottie —— 写给设计师","order":4,"type":"美术","group":null},"fields":{"slug":"/docs/instructions-for-designers-on-lottie-cn","path":"/docs/instructions-for-designers-on-lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"自定义材质","order":4,"type":"资源系统","group":null},"fields":{"slug":"/docs/custom-material-cn","path":"/docs/custom-material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Lottie","order":3.6,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-lottie-cn","path":"/docs/editor-lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Spine","order":3.5,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-component-spine-cn","path":"/docs/editor-component-spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"动画编辑","order":3.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-animator-cn","path":"/docs/editor-animator.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Mars","order":3.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-mars-cn","path":"/docs/editor-mars.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵遮罩","order":3.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-sprite-mask-cn","path":"/docs/editor-sprite-mask.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵图集","order":3.1,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-sprite-atlas-cn","path":"/docs/editor-spriteAtlas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵渲染","order":3.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-sprite-renderer-cn","path":"/docs/editor-sprite-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Export Unlit Material","order":3,"type":"Artist","group":null},"fields":{"slug":"/docs/artist-unlit","path":"/docs/artist-unlit.md"}}},{"node":{"frontmatter":{"title":"Light","order":3,"type":"Component","group":null},"fields":{"slug":"/docs/light","path":"/docs/light.md"}}},{"node":{"frontmatter":{"title":"Scene","order":3,"type":"Core","group":null},"fields":{"slug":"/docs/scene","path":"/docs/scene.md"}}},{"node":{"frontmatter":{"title":"3. The first script","order":3,"type":"Introduction","group":null},"fields":{"slug":"/docs/first-script","path":"/docs/first-script.md"}}},{"node":{"frontmatter":{"title":"Material","order":3,"type":"Resource","group":null},"fields":{"slug":"/docs/material","path":"/docs/material.md"}}},{"node":{"frontmatter":{"title":"Spine","order":3,"type":"Second party packages","group":null},"fields":{"slug":"/docs/spine","path":"/docs/spine.md"}}},{"node":{"frontmatter":{"title":"Event","order":3,"type":"Tool","group":null},"fields":{"slug":"/docs/event","path":"/docs/event.md"}}},{"node":{"frontmatter":{"title":"Spine","order":3,"type":"二方库","group":null},"fields":{"slug":"/docs/spine-cn","path":"/docs/spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"3. 第一个脚本组件","order":3,"type":"入门","group":null},"fields":{"slug":"/docs/first-script-cn","path":"/docs/first-script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"事件系统","order":3,"type":"工具库","group":null},"fields":{"slug":"/docs/event-cn","path":"/docs/event.zh-CN.md"}}},{"node":{"frontmatter":{"title":"场景","order":3,"type":"核心","group":null},"fields":{"slug":"/docs/scene-cn","path":"/docs/scene.zh-CN.md"}}},{"node":{"frontmatter":{"title":"光照","order":3,"type":"组件","group":null},"fields":{"slug":"/docs/light-cn","path":"/docs/light.zh-CN.md"}}},{"node":{"frontmatter":{"title":"层级面板","order":3,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-hierarchy-cn","path":"/docs/editor-hierarchy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"本地开发指南","order":3,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-pro-code-cn","path":"/docs/editor-pro-code.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵","order":3,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-sprite-cn","path":"/docs/editor-sprite.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出 Unlit 材质","order":3,"type":"美术","group":null},"fields":{"slug":"/docs/artist-unlit-cn","path":"/docs/artist-unlit.zh-CN.md"}}},{"node":{"frontmatter":{"title":"场景规格","order":3,"type":"美术","group":null},"fields":{"slug":"/docs/editor-art-cn","path":"/docs/editor-art.zh-CN.md"}}},{"node":{"frontmatter":{"title":"材质","order":3,"type":"资源系统","group":null},"fields":{"slug":"/docs/material-cn","path":"/docs/material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"粒子系统","order":2.5,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-particle-cn","path":"/docs/editor-particle.zh-CN.md"}}},{"node":{"frontmatter":{"title":"几何体模型","order":2.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-geometry-model-cn","path":"/docs/editor-geometry-model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Sprite Atlas","order":2.1,"type":"Resource","group":null},"fields":{"slug":"/docs/sprite-atlas","path":"/docs/sprite-atlas.md"}}},{"node":{"frontmatter":{"title":"glTF 模型","order":2.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-component-gltf-cn","path":"/docs/editor-component-gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵图集资源","order":2.1,"type":"资源系统","group":null},"fields":{"slug":"/docs/sprite-atlas-cn","path":"/docs/sprite-atlas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Making AnimationClip","order":2,"type":"Artist","group":null},"fields":{"slug":"/docs/artist-animation-clip","path":"/docs/artist-animation-clip.md"}}},{"node":{"frontmatter":{"title":"Camera","order":2,"type":"Component","group":null},"fields":{"slug":"/docs/camera","path":"/docs/camera.md"}}},{"node":{"frontmatter":{"title":"Canvas","order":2,"type":"Core","group":null},"fields":{"slug":"/docs/canvas","path":"/docs/canvas.md"}}},{"node":{"frontmatter":{"title":"2. Load a 3D Model","order":2,"type":"Introduction","group":null},"fields":{"slug":"/docs/model","path":"/docs/model.md"}}},{"node":{"frontmatter":{"title":"Sprite","order":2,"type":"Resource","group":null},"fields":{"slug":"/docs/sprite","path":"/docs/sprite.md"}}},{"node":{"frontmatter":{"title":"Texture Resource","order":2,"type":"Resource","group":null},"fields":{"slug":"/docs/texture","path":"/docs/texture.md"}}},{"node":{"frontmatter":{"title":"FrameBuffer Picker","order":2,"type":"Second party packages","group":null},"fields":{"slug":"/docs/framebuffer-picker","path":"/docs/framebuffer-picker.md"}}},{"node":{"frontmatter":{"title":"stats","order":2,"type":"Tool","group":null},"fields":{"slug":"/docs/stats","path":"/docs/stats.md"}}},{"node":{"frontmatter":{"title":"帧缓冲拾取","order":2,"type":"二方库","group":null},"fields":{"slug":"/docs/framebuffer-picker-cn","path":"/docs/framebuffer-picker.zh-CN.md"}}},{"node":{"frontmatter":{"title":"2. 加载一个 3D 模型","order":2,"type":"入门","group":null},"fields":{"slug":"/docs/model-cn","path":"/docs/model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"统计面板","order":2,"type":"工具库","group":null},"fields":{"slug":"/docs/stats-cn","path":"/docs/stats.zh-CN.md"}}},{"node":{"frontmatter":{"title":"画布","order":2,"type":"核心","group":null},"fields":{"slug":"/docs/canvas-cn","path":"/docs/canvas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"相机","order":2,"type":"组件","group":null},"fields":{"slug":"/docs/camera-cn","path":"/docs/camera.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出支付宝小程序包","order":2,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-export-minprogram-cn","path":"/docs/editor-export-minprogram.zh-CN.md"}}},{"node":{"frontmatter":{"title":"事件通信","order":2,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-script-communication-cn","path":"/docs/editor-script-communication.zh-CN.md"}}},{"node":{"frontmatter":{"title":"视图区","order":2,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-viewport-cn","path":"/docs/editor-viewport.zh-CN.md"}}},{"node":{"frontmatter":{"title":"立方体纹理","order":2,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-texture-cube-map-cn","path":"/docs/editor-textureCubeMap.zh-CN.md"}}},{"node":{"frontmatter":{"title":"动画切片","order":2,"type":"美术","group":null},"fields":{"slug":"/docs/artist-animation-clip-cn","path":"/docs/artist-animation-clip.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵资源","order":2,"type":"资源系统","group":null},"fields":{"slug":"/docs/sprite-cn","path":"/docs/sprite.zh-CN.md"}}},{"node":{"frontmatter":{"title":"纹理资源","order":2,"type":"资源系统","group":null},"fields":{"slug":"/docs/texture-cn","path":"/docs/texture.zh-CN.md"}}},{"node":{"frontmatter":{"title":"碰撞体","order":1.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-collider-cn","path":"/docs/editor-collider.zh-CN.md"}}},{"node":{"frontmatter":{"title":"光照","order":1.3,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-light-cn","path":"/docs/editor-light.zh-CN.md"}}},{"node":{"frontmatter":{"title":"相机","order":1.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-camera-cn","path":"/docs/editor-camera.zh-CN.md"}}},{"node":{"frontmatter":{"title":"变换","order":1.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-transform-cn","path":"/docs/editor-transform.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Baking texture","order":1,"type":"Artist","group":null},"fields":{"slug":"/docs/artist-bake","path":"/docs/artist-bake.md"}}},{"node":{"frontmatter":{"title":"transform","order":1,"type":"Component","group":null},"fields":{"slug":"/docs/transform","path":"/docs/transform.md"}}},{"node":{"frontmatter":{"title":"Engine","order":1,"type":"Core","group":null},"fields":{"slug":"/docs/engine","path":"/docs/engine.md"}}},{"node":{"frontmatter":{"title":"1. Draw a Cube","order":1,"type":"Introduction","group":null},"fields":{"slug":"/docs/cube","path":"/docs/cube.md"}}},{"node":{"frontmatter":{"title":"Controls","order":1,"type":"Second party packages","group":null},"fields":{"slug":"/docs/controls","path":"/docs/controls.md"}}},{"node":{"frontmatter":{"title":"Math","order":1,"type":"Tool","group":null},"fields":{"slug":"/docs/math","path":"/docs/math.md"}}},{"node":{"frontmatter":{"title":"相机控件","order":1,"type":"二方库","group":null},"fields":{"slug":"/docs/controls-cn","path":"/docs/controls.zh-CN.md"}}},{"node":{"frontmatter":{"title":"1. 绘制一个立方体","order":1,"type":"入门","group":null},"fields":{"slug":"/docs/cube-cn","path":"/docs/cube.zh-CN.md"}}},{"node":{"frontmatter":{"title":"数学库","order":1,"type":"工具库","group":null},"fields":{"slug":"/docs/math-cn","path":"/docs/math.zh-CN.md"}}},{"node":{"frontmatter":{"title":"引擎","order":1,"type":"核心","group":null},"fields":{"slug":"/docs/engine-cn","path":"/docs/engine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"变换","order":1,"type":"组件","group":null},"fields":{"slug":"/docs/transform-cn","path":"/docs/transform.zh-CN.md"}}},{"node":{"frontmatter":{"title":"常用实体操作","order":1,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-entity-cn","path":"/docs/editor-entity.zh-CN.md"}}},{"node":{"frontmatter":{"title":"快速上手","order":1,"type":"编辑器","group":"介绍"},"fields":{"slug":"/docs/editor-first-step-cn","path":"/docs/editor-first-step.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出 Web 平台包","order":1,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-export-web-cn","path":"/docs/editor-export-web.zh-CN.md"}}},{"node":{"frontmatter":{"title":"菜单栏","order":1,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-menu-cn","path":"/docs/editor-menu.zh-CN.md"}}},{"node":{"frontmatter":{"title":"纹理","order":1,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-texture-cn","path":"/docs/editor-texture.zh-CN.md"}}},{"node":{"frontmatter":{"title":"纹理烘焙","order":1,"type":"美术","group":null},"fields":{"slug":"/docs/artist-bake-cn","path":"/docs/artist-bake.zh-CN.md"}}},{"node":{"frontmatter":{"title":"资源管理与加载","order":1,"type":"资源系统","group":null},"fields":{"slug":"/docs/resource-manager-cn","path":"/docs/resource-manager.zh-CN.md"}}},{"node":{"frontmatter":{"title":"0. Install Oasis Engine","order":0,"type":"Introduction","group":null},"fields":{"slug":"/docs/install","path":"/docs/install.md"}}},{"node":{"frontmatter":{"title":"Mini Program","order":0,"type":"Miniprogram","group":null},"fields":{"slug":"/docs/miniprogram","path":"/docs/miniprogram.md"}}},{"node":{"frontmatter":{"title":"0. 安装 Oasis Engine","order":0,"type":"入门","group":null},"fields":{"slug":"/docs/install-cn","path":"/docs/install.zh-CN.md"}}},{"node":{"frontmatter":{"title":"支付宝/淘宝小程序","order":0,"type":"小程序","group":null},"fields":{"slug":"/docs/miniprogram-cn","path":"/docs/miniprogram.zh-CN.md"}}},{"node":{"frontmatter":{"title":"项目","order":0,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-project-cn","path":"/docs/editor-project.zh-CN.md"}}},{"node":{"frontmatter":{"title":"模型","order":0,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-resource-gltf-cn","path":"/docs/editor-resource-gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"项目发布","order":0,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-publish-cn","path":"/docs/editor-publish.zh-CN.md"}}},{"node":{"frontmatter":{"title":"脚本","order":0,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-script-cn","path":"/docs/editor-script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"关于 Oasis Editor","order":0,"type":"编辑器","group":"介绍"},"fields":{"slug":"/docs/editor-cn","path":"/docs/editor.zh-CN.md"}}}]}},"pageContext":{"slug":"/docs/custom-material","type":"/docs/","locale":"//"}},"staticQueryHashes":[]}