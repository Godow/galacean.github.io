{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.8/playground/input-glTFMerge","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine-toolkit/controls\", \"oasis-engine\", \"@oasis-engine/physics-lite\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine-toolkit/controls\"), require(\"oasis-engine\"), require(\"@oasis-engine/physics-lite\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngineToolkit/controls\"], global.oasisEngine, global[\"@oasisEngine/physicsLite\"]);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, _oasisEngine, _physicsLite) {\n  \"use strict\";\n\n  function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  var GlTFCollider = /*#__PURE__*/function (_Script) {\n    _inheritsLoose(GlTFCollider, _Script);\n\n    function GlTFCollider() {\n      return _Script.apply(this, arguments) || this;\n    }\n\n    var _proto = GlTFCollider.prototype;\n\n    _proto.onStart = function onStart() {\n      var entity = this.entity;\n      var renderers = entity.getComponentsIncludeChildren(_oasisEngine.MeshRenderer, []);\n      var boundingBox = renderers[0].bounds.clone();\n\n      for (var i = renderers.length - 1; i > 0; i--) {\n        _oasisEngine.BoundingBox.merge(boundingBox, renderers[i].bounds, boundingBox);\n      }\n\n      var worldPosition = new _oasisEngine.Vector3();\n      var worldSize = new _oasisEngine.Vector3();\n      var worldMatrix = new _oasisEngine.Matrix(); // Calculate the position and size of the collider.\n\n      boundingBox.getCenter(worldPosition);\n\n      _oasisEngine.Vector3.subtract(boundingBox.max, boundingBox.min, worldSize); // Add entity and calculate the world matrix of the collider.\n\n\n      var boxEntity = entity.createChild(\"box\");\n      boxEntity.transform.worldMatrix = worldMatrix.translate(worldPosition); // Add collider.\n\n      var boxCollider = boxEntity.addComponent(_oasisEngine.StaticCollider);\n      var boxColliderShape = new _oasisEngine.BoxColliderShape();\n      boxColliderShape.setSize(worldSize.x, worldSize.y, worldSize.z);\n      boxCollider.addShape(boxColliderShape); // Add click script.\n\n      boxEntity.addComponent(_oasisEngine.Script).onPointerClick = function () {\n        window.alert(\"click glTF!\");\n      };\n    };\n\n    return GlTFCollider;\n  }(_oasisEngine.Script); //-- create engine object\n\n\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  engine.physicsManager.initialize(_physicsLite.LitePhysics);\n  var scene = engine.sceneManager.activeScene;\n  var rootEntity = scene.createRootEntity();\n  var directLightNode = rootEntity.createChild(\"dir_light\");\n  directLightNode.addComponent(_oasisEngine.DirectLight);\n  directLightNode.transform.setRotation(30, 0, 0); //Create camera\n\n  var cameraNode = rootEntity.createChild(\"camera_node\");\n  cameraNode.transform.setPosition(0, 0, 10);\n  cameraNode.addComponent(_oasisEngine.Camera);\n  cameraNode.addComponent(_controls.OrbitControl);\n  engine.resourceManager.load(\"https://gw.alipayobjects.com/os/bmw-prod/48a1e8b3-06b4-4269-807d-79274e58283a.glb\").then(function (glTF) {\n    var glTFRoot = glTF.defaultSceneRoot;\n    glTFRoot.transform.setScale(0.005, 0.005, 0.005);\n    glTFRoot.addComponent(GlTFCollider);\n    rootEntity.addChild(glTFRoot);\n    engine.run();\n  });\n});"},"name":"input-glTFMerge","id":"d688dd58-3a43-5dcb-b818-35eb1c98844c"}}},"staticQueryHashes":[]}