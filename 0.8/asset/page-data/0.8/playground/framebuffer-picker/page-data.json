{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.8/playground/framebuffer-picker","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"oasis-engine\", \"@oasis-engine-toolkit/controls\", \"@oasis-engine-toolkit/framebuffer-picker\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"oasis-engine\"), require(\"@oasis-engine-toolkit/controls\"), require(\"@oasis-engine-toolkit/framebuffer-picker\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.oasisEngine, global[\"@oasisEngineToolkit/controls\"], global[\"@oasisEngineToolkit/framebufferPicker\"]);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_oasisEngine, _controls, _framebufferPicker) {\n  \"use strict\";\n\n  function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  var ClickScript = /*#__PURE__*/function (_Script) {\n    _inheritsLoose(ClickScript, _Script);\n\n    function ClickScript() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _Script.call.apply(_Script, [this].concat(args)) || this;\n      _this.material = void 0;\n      return _this;\n    }\n\n    var _proto = ClickScript.prototype;\n\n    _proto.onUpdate = function onUpdate() {\n      var _this2 = this;\n\n      var inputManager = this.engine.inputManager;\n\n      if (inputManager.isPointerDown(_oasisEngine.PointerButton.Primary)) {\n        var pointerPosition = inputManager.pointerPosition;\n        framebufferPicker.pick(pointerPosition.x, pointerPosition.y).then(function (renderElement) {\n          if (renderElement) {\n            _this2.material.baseColor.set(1, 0, 0, 1);\n          } else {\n            _this2.material.baseColor.set(1, 1, 1, 1);\n          }\n        });\n      }\n    };\n\n    return ClickScript;\n  }(_oasisEngine.Script);\n\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  var scene = engine.sceneManager.activeScene;\n  var rootNode = scene.createRootEntity();\n  scene.ambientLight.diffuseSolidColor.set(1, 1, 1, 1);\n  var cameraEntity = rootNode.createChild(\"camera_node\");\n  var camera = cameraEntity.addComponent(_oasisEngine.Camera);\n  var control = cameraEntity.addComponent(_controls.OrbitControl);\n  cameraEntity.transform.position = new _oasisEngine.Vector3(10, 10, 30);\n  control.target.set(0, 3, 0);\n  var framebufferPicker = rootNode.addComponent(_framebufferPicker.FramebufferPicker);\n  framebufferPicker.camera = camera;\n  engine.resourceManager.load(\"https://gw.alipayobjects.com/os/bmw-prod/f40ef8dd-4c94-41d4-8fac-c1d2301b6e47.glb\").then(function (gltf) {\n    var defaultSceneRoot = gltf.defaultSceneRoot,\n        materials = gltf.materials;\n    var material = materials[0];\n    defaultSceneRoot.transform.setScale(0.1, 0.1, 0.1);\n    rootNode.addChild(defaultSceneRoot);\n    var click = cameraEntity.addComponent(ClickScript);\n    click.material = material;\n  });\n  engine.run();\n});"},"name":"framebuffer-picker","id":"2dbf822b-d1db-5fab-b2db-e273b423facb"}}},"staticQueryHashes":[]}