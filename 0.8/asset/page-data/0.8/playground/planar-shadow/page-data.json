{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.8/playground/planar-shadow","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine-toolkit/controls\", \"@oasis-engine-toolkit/planar-shadow-material\", \"oasis-engine\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine-toolkit/controls\"), require(\"@oasis-engine-toolkit/planar-shadow-material\"), require(\"oasis-engine\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngineToolkit/controls\"], global[\"@oasisEngineToolkit/planarShadowMaterial\"], global.oasisEngine);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, _planarShadowMaterial, _oasisEngine) {\n  \"use strict\";\n\n  /**\n   * @title Planar Shadow\n   * @category Toolkit\n   */\n  _oasisEngine.Logger.enable();\n\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  var scene = engine.sceneManager.activeScene;\n  var rootEntity = scene.createRootEntity(); // camera\n\n  var cameraEntity = rootEntity.createChild(\"camera_node\");\n  cameraEntity.transform.setPosition(0, 1, 5);\n  cameraEntity.addComponent(_oasisEngine.Camera);\n  cameraEntity.addComponent(_controls.OrbitControl).target = new _oasisEngine.Vector3(0, 1, 0);\n  var lightNode = rootEntity.createChild(\"light_node\");\n  lightNode.addComponent(_oasisEngine.DirectLight);\n  lightNode.transform.setPosition(-10, 10, 10);\n  lightNode.transform.lookAt(new _oasisEngine.Vector3(0, 0, 0));\n  var planeNode = rootEntity.createChild(\"plane_node\");\n  var renderer = planeNode.addComponent(_oasisEngine.MeshRenderer);\n  renderer.mesh = _oasisEngine.PrimitiveMesh.createPlane(engine, 10, 10);\n  var planeMat = new _oasisEngine.BlinnPhongMaterial(engine);\n  planeMat.baseColor.set(1, 1.0, 0, 1.0);\n  renderer.setMaterial(planeMat);\n  engine.resourceManager.load(\"https://gw.alipayobjects.com/os/bmw-prod/5e3c1e4e-496e-45f8-8e05-f89f2bd5e4a4.glb\").then(function (asset) {\n    var defaultSceneRoot = asset.defaultSceneRoot;\n    rootEntity.addChild(defaultSceneRoot);\n    var animator = defaultSceneRoot.getComponent(_oasisEngine.Animator);\n    animator.play(asset.animations[0].name);\n    var lightDir = new _oasisEngine.Vector3();\n    lightNode.transform.getWorldForward(lightDir);\n    var shadowMaterial = new _planarShadowMaterial.PlanarShadowMaterial(engine);\n    shadowMaterial.shadowFalloff = 0.2;\n    shadowMaterial.shadowColor.set(0, 0, 0, 1.0);\n    shadowMaterial.planarHeight = 0.01;\n    shadowMaterial.lightDirection = lightDir;\n    var renderers = [];\n    defaultSceneRoot.getComponentsIncludeChildren(_oasisEngine.SkinnedMeshRenderer, renderers);\n\n    for (var i = 0, n = renderers.length; i < n; i++) {\n      var skinRenderer = renderers[i];\n      var shadowRenderer = skinRenderer.entity.addComponent(_oasisEngine.SkinnedMeshRenderer);\n      shadowRenderer.mesh = skinRenderer.mesh;\n      shadowRenderer.skin = skinRenderer.skin;\n      shadowRenderer.setMaterial(shadowMaterial);\n    }\n  });\n  engine.run();\n});"},"name":"planar-shadow","id":"0c95706a-2488-58d8-b494-389db07444a3"}}},"staticQueryHashes":[]}