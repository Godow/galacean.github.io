{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.6/playground/obj-loader","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine/controls\", \"oasis-engine\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine/controls\"), require(\"oasis-engine\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngine/controls\"], global.oasisEngine);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, _oasisEngine) {\n  \"use strict\";\n\n  /**\n   * @title OBJ Loader Use Model Mesh\n   * @category Mesh\n   */\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  var scene = engine.sceneManager.activeScene;\n  var rootEntity = scene.createRootEntity(); // init camera\n\n  var cameraEntity = rootEntity.createChild(\"camera\");\n  cameraEntity.addComponent(_oasisEngine.Camera);\n  cameraEntity.addComponent(_controls.OrbitControl);\n  cameraEntity.transform.setPosition(0.5, 0.5, 0.5);\n  cameraEntity.transform.lookAt(new _oasisEngine.Vector3(0, 0, 0)); // init light\n\n  rootEntity.addComponent(_oasisEngine.DirectLight);\n  fetch(\"https://gw.alipayobjects.com/os/bmw-prod/b885a803-5315-44f0-af54-6787ec47ed1b.obj\").then(function (res) {\n    return res.text();\n  }).then(function (objText) {\n    var lines = objText.split(/\\n/);\n    var positions = [];\n    var indices = [];\n    lines.map(function (lineText) {\n      return lineText.split(\" \");\n    }).forEach(function (parseTexts) {\n      if (parseTexts[0] === \"v\") {\n        positions.push(new _oasisEngine.Vector3(parseFloat(parseTexts[1]), parseFloat(parseTexts[2]), parseFloat(parseTexts[3])));\n      } else if (parseTexts[0] === \"f\") {\n        indices.push(parseInt(parseTexts[1]) - 1, parseInt(parseTexts[2]) - 1, parseInt(parseTexts[3]) - 1);\n      }\n    });\n    var mesh = new _oasisEngine.ModelMesh(engine);\n    mesh.setPositions(positions);\n    mesh.setIndices(Uint16Array.from(indices));\n    mesh.addSubMesh(0, indices.length, _oasisEngine.MeshTopology.Triangles);\n    mesh.uploadData(false); // init cube\n\n    var cubeEntity = rootEntity.createChild(\"cube\");\n    var renderer = cubeEntity.addComponent(_oasisEngine.MeshRenderer);\n    renderer.mesh = mesh;\n    var material = new _oasisEngine.BlinnPhongMaterial(engine);\n    material.baseColor = new _oasisEngine.Color(1, 0.25, 0.25, 1);\n    renderer.setMaterial(material);\n  });\n  engine.run();\n});"},"name":"obj-loader","id":"a44bf202-1546-5e99-8895-98d5d49b7ec5"}}},"staticQueryHashes":[]}