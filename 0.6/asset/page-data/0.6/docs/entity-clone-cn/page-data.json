{"componentChunkName":"component---src-templates-docs-tsx","path":"/0.6/docs/entity-clone-cn","result":{"data":{"markdownRemark":{"html":"<p>节点克隆是运行时的常用功能，同时节点克隆也会附带克隆其绑定的组件。例如在初始化阶段根据配置动态创建一定数量相同的实体,然后根据逻辑规则摆放到场景不同的位置。这里会对脚本的克隆细节进行详细讲解。</p>\n<h2 id=\"实体的克隆\" style=\"position:relative;\"><a href=\"#%E5%AE%9E%E4%BD%93%E7%9A%84%E5%85%8B%E9%9A%86\" aria-label=\"实体的克隆 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实体的克隆</h2>\n<p>非常简单，直接调用实体的 <a href=\"/0.6/api/design/IClone#clone\">clone()</a> 方法即可完成实体以及附属组件的克隆。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> cloneEntity <span class=\"token operator\">=</span> entity<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"脚本的克隆\" style=\"position:relative;\"><a href=\"#%E8%84%9A%E6%9C%AC%E7%9A%84%E5%85%8B%E9%9A%86\" aria-label=\"脚本的克隆 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>脚本的克隆</h2>\n<p>脚本的本质也是组件，所以当我们调用实体的 <a href=\"/0.6/api/design/IClone#clone\">clone()</a> 函数时，引擎不仅会对引擎内置组件进行克隆，还是对自定义脚本进行克隆。引擎内置组件的克隆规则官方已经完成定制，同样我们也将脚本的克隆能力和规则定制开放给了开发者。脚本字段默认的克隆方式为浅拷贝，例如我们对脚本的字段值进行修改后再克隆，克隆后的脚本将保持修改后的值,无需增加任何额外的编码。以下为自定义脚本的克隆案例：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// define a custom script</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomScript</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Script</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** boolean type.*/</span>\n  a<span class=\"token operator\">:</span><span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">/** number type.*/</span>\n  b<span class=\"token operator\">:</span><span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">/** class type.*/</span>\n  c<span class=\"token operator\">:</span>Vector3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//init entity and script.</span>\n<span class=\"token keyword\">const</span> entity <span class=\"token operator\">=</span> engine<span class=\"token punctuation\">.</span><span class=\"token function\">createEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> script <span class=\"token operator\">=</span> entity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>CustomScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// clone logic.</span>\n<span class=\"token keyword\">const</span> cloneEntity <span class=\"token operator\">=</span> entity<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cloneScript <span class=\"token operator\">=</span> cloneEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getComponent</span><span class=\"token punctuation\">(</span>CustomScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is true.</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is 2.</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is (1,1,1).</span></code></pre></div>\n<h3 id=\"克隆装饰器\" style=\"position:relative;\"><a href=\"#%E5%85%8B%E9%9A%86%E8%A3%85%E9%A5%B0%E5%99%A8\" aria-label=\"克隆装饰器 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>克隆装饰器</h3>\n<p>除了默认的克隆方式外，引擎还提供了“克隆装饰器“对脚本字段的克隆方式进行定制。引擎内置四种克隆装饰：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">装饰器名称</th>\n<th align=\"left\">装饰器释义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><a href=\"/0.6/api/core/ignoreClone\">ignoreClone</a></td>\n<td align=\"left\">克隆时对字段进行忽略。</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/0.6/api/core/assignmentClone\">assignmentClone</a></td>\n<td align=\"left\">( 默认值，和不添加任何克隆装饰器等效) 克隆时对字段进行赋值。如果是基本类型则会拷贝值，如果是引用类型则会拷贝其引用地址。</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/0.6/api/core/shallowClone\">shallowClone</a></td>\n<td align=\"left\">克隆时对字段进行浅克隆。克隆后会保持自身引用独立，并使用赋值的方式克隆其内部所有字段（如果内部字段是基本类型则会拷贝值，如果内部字段是引用类型则会拷贝其引用地址）。</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/0.6/api/core/deepClone\">deepClone</a></td>\n<td align=\"left\">克隆时对字段进行深克隆。克隆后会保持自身引用独立，并且其内部所有深层字段均保持完全独立。</td>\n</tr>\n</tbody>\n</table>\n<p> 我们将上面的案例稍加修改,分别对 <code>CustomScript</code> 中的四个字段添加了不同的“克隆装饰器“,由于 <code>shallowClone</code> 和 <code>deepCone</code>  较复杂，我们对字段 <code>c</code> 和 <code>d</code> 增加了额外的打印输出进行进一步讲解。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// define a custom script</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomScript</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Script</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** boolean type.*/</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">ignoreClone</span></span>\n  a<span class=\"token operator\">:</span><span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">/** number type.*/</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">assignmentClone</span></span>\n  b<span class=\"token operator\">:</span><span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">/** class type.*/</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">shallowClone</span></span>\n  c<span class=\"token operator\">:</span>Vector3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">/** class type.*/</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">deepClone</span></span>\n  d<span class=\"token operator\">:</span>Vector3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//init entity and script.</span>\n<span class=\"token keyword\">const</span> entity <span class=\"token operator\">=</span> engine<span class=\"token punctuation\">.</span><span class=\"token function\">createEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> script <span class=\"token operator\">=</span> entity<span class=\"token punctuation\">.</span><span class=\"token function\">addComponent</span><span class=\"token punctuation\">(</span>CustomScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscript<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// clone logic.</span>\n<span class=\"token keyword\">const</span> cloneEntity <span class=\"token operator\">=</span> entity<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cloneScript <span class=\"token operator\">=</span> cloneEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getComponent</span><span class=\"token punctuation\">(</span>CustomScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is false,ignoreClone will ignore the value.</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is 2,assignmentClone is just assignment the origin value.</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is Vector3(1,1,1),shallowClone clone the array shell,but use the same element.</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cloneScript<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is Vector3(1,1,1),deepClone clone the array shell and also clone the element.</span>\n\ncloneScript<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// change the field c[0] value to (2,2,2).</span>\ncloneScript<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// change the field d[0] value to (2,2,2).</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is (2,2,2). bacause shallowClone let c[0] use the same reference with cloneScript's c[0].</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// output is (1,1,1). bacause deepClone let d[0] use the different reference with cloneScript's d[0].</span></code></pre></div>\n<p>注意: </p>\n<ul>\n<li><code>shallowClone</code> 和 <code>deepClone</code> 适用于 <em>Object</em>、<em>Array</em> 和 <em>Class</em> 类型。</li>\n<li><code>shallowClone</code> 克隆后会保持自身引用独立，并使用赋值的方式克隆其内部所有字段（如果内部字段是基本类型则会拷贝值，如果内部字段是引用类型则会拷贝其引用地址）。</li>\n<li><code>deepClone</code> 如果在深克隆过程中遇到 <em>Class</em> 则会调用对象的 <a href=\"/0.6/api/design/IClone#cloneTo\">cloneTo()</a> 实现克隆，需要对象实现 <a href=\"/0.6/api/design/IClone\">IClone</a> 接口。</li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"节点克隆是运行时的常用功能，同时节点克隆也会附带克隆其绑定的组件。例如在初始化阶段根据配置动态创建一定数量相同的实体,然后根据逻辑规则摆放到场景不同的位置。这里会对脚本的克隆细节进行详细讲解。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"实体的克隆","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E5%AE%9E%E4%BD%93%E7%9A%84%E5%85%8B%E9%9A%86","ariaLabel":"实体的克隆 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"实体的克隆"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"非常简单，直接调用实体的 "},{"type":"element","tagName":"a","properties":{"href":"/0.6/api/design/IClone#clone"},"children":[{"type":"text","value":"clone()"}]},{"type":"text","value":" 方法即可完成实体以及附属组件的克隆。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cloneEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"clone"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"脚本的克隆","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E8%84%9A%E6%9C%AC%E7%9A%84%E5%85%8B%E9%9A%86","ariaLabel":"脚本的克隆 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"脚本的克隆"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"脚本的本质也是组件，所以当我们调用实体的 "},{"type":"element","tagName":"a","properties":{"href":"/0.6/api/design/IClone#clone"},"children":[{"type":"text","value":"clone()"}]},{"type":"text","value":" 函数时，引擎不仅会对引擎内置组件进行克隆，还是对自定义脚本进行克隆。引擎内置组件的克隆规则官方已经完成定制，同样我们也将脚本的克隆能力和规则定制开放给了开发者。脚本字段默认的克隆方式为浅拷贝，例如我们对脚本的字段值进行修改后再克隆，克隆后的脚本将保持修改后的值,无需增加任何额外的编码。以下为自定义脚本的克隆案例："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// define a custom script"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomScript"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** boolean type.*/"}]},{"type":"text","value":"\n  a"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** number type.*/"}]},{"type":"text","value":"\n  b"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** class type.*/"}]},{"type":"text","value":"\n  c"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"Vector3 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//init entity and script."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" entity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" script "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"CustomScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"a "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// clone logic."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cloneEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"clone"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cloneScript "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" cloneEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"CustomScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"a"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is true."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is 2."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is (1,1,1)."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"克隆装饰器","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E5%85%8B%E9%9A%86%E8%A3%85%E9%A5%B0%E5%99%A8","ariaLabel":"克隆装饰器 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"克隆装饰器"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"除了默认的克隆方式外，引擎还提供了“克隆装饰器“对脚本字段的克隆方式进行定制。引擎内置四种克隆装饰："}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"装饰器名称"}]},{"type":"element","tagName":"th","properties":{"align":"left"},"children":[{"type":"text","value":"装饰器释义"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"a","properties":{"href":"/0.6/api/core/ignoreClone"},"children":[{"type":"text","value":"ignoreClone"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"克隆时对字段进行忽略。"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"a","properties":{"href":"/0.6/api/core/assignmentClone"},"children":[{"type":"text","value":"assignmentClone"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"( 默认值，和不添加任何克隆装饰器等效) 克隆时对字段进行赋值。如果是基本类型则会拷贝值，如果是引用类型则会拷贝其引用地址。"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"a","properties":{"href":"/0.6/api/core/shallowClone"},"children":[{"type":"text","value":"shallowClone"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"克隆时对字段进行浅克隆。克隆后会保持自身引用独立，并使用赋值的方式克隆其内部所有字段（如果内部字段是基本类型则会拷贝值，如果内部字段是引用类型则会拷贝其引用地址）。"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"element","tagName":"a","properties":{"href":"/0.6/api/core/deepClone"},"children":[{"type":"text","value":"deepClone"}]}]},{"type":"element","tagName":"td","properties":{"align":"left"},"children":[{"type":"text","value":"克隆时对字段进行深克隆。克隆后会保持自身引用独立，并且其内部所有深层字段均保持完全独立。"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":" 我们将上面的案例稍加修改,分别对 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"CustomScript"}]},{"type":"text","value":" 中的四个字段添加了不同的“克隆装饰器“,由于 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"shallowClone"}]},{"type":"text","value":" 和 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"deepCone"}]},{"type":"text","value":"  较复杂，我们对字段 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"c"}]},{"type":"text","value":" 和 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"text","value":" 增加了额外的打印输出进行进一步讲解。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"typescript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-typescript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// define a custom script"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomScript"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** boolean type.*/"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","decorator"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","at","operator"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ignoreClone"}]}]},{"type":"text","value":"\n  a"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** number type.*/"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","decorator"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","at","operator"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assignmentClone"}]}]},{"type":"text","value":"\n  b"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** class type.*/"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","decorator"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","at","operator"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"shallowClone"}]}]},{"type":"text","value":"\n  c"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"Vector3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/** class type.*/"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","decorator"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","at","operator"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"deepClone"}]}]},{"type":"text","value":"\n  d"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"Vector3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Vector3"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//init entity and script."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" entity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" engine"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" script "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"CustomScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"a "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nscript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"d"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// clone logic."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cloneEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"clone"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cloneScript "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" cloneEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getComponent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"CustomScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"a"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is false,ignoreClone will ignore the value."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"b"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is 2,assignmentClone is just assignment the origin value."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is Vector3(1,1,1),shallowClone clone the array shell,but use the same element."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"d"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is Vector3(1,1,1),deepClone clone the array shell and also clone the element."}]},{"type":"text","value":"\n\ncloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// change the field c[0] value to (2,2,2)."}]},{"type":"text","value":"\ncloneScript"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"d"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// change the field d[0] value to (2,2,2)."}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"script"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"c"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is (2,2,2). bacause shallowClone let c[0] use the same reference with cloneScript's c[0]."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"script"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"d"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// output is (1,1,1). bacause deepClone let d[0] use the different reference with cloneScript's d[0]."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"注意: "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"shallowClone"}]},{"type":"text","value":" 和 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"deepClone"}]},{"type":"text","value":" 适用于 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Object"}]},{"type":"text","value":"、"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Array"}]},{"type":"text","value":" 和 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Class"}]},{"type":"text","value":" 类型。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"shallowClone"}]},{"type":"text","value":" 克隆后会保持自身引用独立，并使用赋值的方式克隆其内部所有字段（如果内部字段是基本类型则会拷贝值，如果内部字段是引用类型则会拷贝其引用地址）。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"deepClone"}]},{"type":"text","value":" 如果在深克隆过程中遇到 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Class"}]},{"type":"text","value":" 则会调用对象的 "},{"type":"element","tagName":"a","properties":{"href":"/0.6/api/design/IClone#cloneTo"},"children":[{"type":"text","value":"cloneTo()"}]},{"type":"text","value":" 实现克隆，需要对象实现 "},{"type":"element","tagName":"a","properties":{"href":"/0.6/api/design/IClone"},"children":[{"type":"text","value":"IClone"}]},{"type":"text","value":" 接口。"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"tableOfContents":"<ul>\n<li><a href=\"/docs/entity-clone-cn/#%E5%AE%9E%E4%BD%93%E7%9A%84%E5%85%8B%E9%9A%86\">实体的克隆</a></li>\n<li>\n<p><a href=\"/docs/entity-clone-cn/#%E8%84%9A%E6%9C%AC%E7%9A%84%E5%85%8B%E9%9A%86\">脚本的克隆</a></p>\n<ul>\n<li><a href=\"/docs/entity-clone-cn/#%E5%85%8B%E9%9A%86%E8%A3%85%E9%A5%B0%E5%99%A8\">克隆装饰器</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"克隆","order":5,"type":"核心"},"fields":{"path":"/docs/entity-clone.zh-CN.md","slug":"/docs/entity-clone-cn","modifiedTime":1639711960763,"source":"https://github.com/oasis-engine/oasis-engine.github.io/blob/main/docs/entity-clone.zh-CN.md"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"射线投射","order":13,"type":"组件","group":null},"fields":{"slug":"/docs/ray-cn","path":"/docs/ray.zh-CN.md"}}},{"node":{"frontmatter":{"title":"碰撞检测","order":12,"type":"组件","group":null},"fields":{"slug":"/docs/collider-cn","path":"/docs/collider.zh-CN.md"}}},{"node":{"frontmatter":{"title":"粒子系统","order":11,"type":"组件","group":null},"fields":{"slug":"/docs/particle-renderer-cn","path":"/docs/particle-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"动画控制","order":10,"type":"组件","group":null},"fields":{"slug":"/docs/animator-cn","path":"/docs/animator.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵遮罩","order":8.1,"type":"组件","group":null},"fields":{"slug":"/docs/sprite-mask-cn","path":"/docs/sprite-mask.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵渲染器","order":8,"type":"组件","group":null},"fields":{"slug":"/docs/sprite-renderer-cn","path":"/docs/sprite-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"输入交互","order":7,"type":"核心","group":null},"fields":{"slug":"/docs/input-cn","path":"/docs/input.zh-CN.md"}}},{"node":{"frontmatter":{"title":"基础几何体","order":7,"type":"组件","group":null},"fields":{"slug":"/docs/primitive-mesh-cn","path":"/docs/primitive-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"美术软件到引擎的视觉还原度","order":7,"type":"美术","group":null},"fields":{"slug":"/docs/artist-export-engine-cn","path":"/docs/artist-export-engine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"脚本","order":6,"type":"核心","group":null},"fields":{"slug":"/docs/script-cn","path":"/docs/script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Buffer Mesh","order":6,"type":"组件","group":null},"fields":{"slug":"/docs/buffer-mesh-cn","path":"/docs/buffer-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"资产库","order":6,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-asset-store-cn","path":"/docs/editor-asset-store.zh-CN.md"}}},{"node":{"frontmatter":{"title":"添加组件","order":6,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-component-cn","path":"/docs/editor-component.zh-CN.md"}}},{"node":{"frontmatter":{"title":"AE && lottie —— 写给设计师","order":6,"type":"美术","group":null},"fields":{"slug":"/docs/instructions-for-designers-on-lottie-cn","path":"/docs/instructions-for-designers-on-lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"克隆","order":5,"type":"核心","group":null},"fields":{"slug":"/docs/entity-clone-cn","path":"/docs/entity-clone.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Model Mesh","order":5,"type":"组件","group":null},"fields":{"slug":"/docs/model-mesh-cn","path":"/docs/model-mesh.zh-CN.md"}}},{"node":{"frontmatter":{"title":"上传资产","order":5,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-assets-panel-cn","path":"/docs/editor-assets-panel.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Spine","order":5,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-resource-spine-cn","path":"/docs/editor-resource-spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"动画切片","order":5,"type":"美术","group":null},"fields":{"slug":"/docs/artist-animation-clip-cn","path":"/docs/artist-animation-clip.zh-CN.md"}}},{"node":{"frontmatter":{"title":"glTF 资源","order":5,"type":"资源系统","group":null},"fields":{"slug":"/docs/gltf-cn","path":"/docs/gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Lottie","order":4,"type":"二方库","group":null},"fields":{"slug":"/docs/lottie-cn","path":"/docs/lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"4. 第一个游戏","order":4,"type":"入门","group":null},"fields":{"slug":"/docs/first-game-cn","path":"/docs/first-game.zh-CN.md"}}},{"node":{"frontmatter":{"title":"实体与组件","order":4,"type":"核心","group":null},"fields":{"slug":"/docs/entity-cn","path":"/docs/entity.zh-CN.md"}}},{"node":{"frontmatter":{"title":"网格渲染器","order":4,"type":"组件","group":null},"fields":{"slug":"/docs/mesh-renderer-cn","path":"/docs/mesh-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"检查器","order":4,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-inspector-cn","path":"/docs/editor-inspector.zh-CN.md"}}},{"node":{"frontmatter":{"title":"材质","order":4,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-material-cn","path":"/docs/editor-material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出 Unlit 材质","order":4,"type":"美术","group":null},"fields":{"slug":"/docs/artist-unlit-cn","path":"/docs/artist-unlit.zh-CN.md"}}},{"node":{"frontmatter":{"title":"自定义材质","order":4,"type":"资源系统","group":null},"fields":{"slug":"/docs/custom-material-cn","path":"/docs/custom-material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Lottie","order":3.6,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-lottie-cn","path":"/docs/editor-lottie.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Spine","order":3.5,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-component-spine-cn","path":"/docs/editor-component-spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"动画编辑","order":3.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-animator-cn","path":"/docs/editor-animator.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Mars","order":3.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-mars-cn","path":"/docs/editor-mars.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵遮罩","order":3.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-sprite-mask-cn","path":"/docs/editor-sprite-mask.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵渲染","order":3.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-sprite-renderer-cn","path":"/docs/editor-sprite-renderer.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵图集","order":3.1,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-sprite-atlas-cn","path":"/docs/editor-spriteAtlas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Spine","order":3,"type":"二方库","group":null},"fields":{"slug":"/docs/spine-cn","path":"/docs/spine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"3. 第一个脚本组件","order":3,"type":"入门","group":null},"fields":{"slug":"/docs/first-script-cn","path":"/docs/first-script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"事件系统","order":3,"type":"工具库","group":null},"fields":{"slug":"/docs/event-cn","path":"/docs/event.zh-CN.md"}}},{"node":{"frontmatter":{"title":"场景","order":3,"type":"核心","group":null},"fields":{"slug":"/docs/scene-cn","path":"/docs/scene.zh-CN.md"}}},{"node":{"frontmatter":{"title":"光照","order":3,"type":"组件","group":null},"fields":{"slug":"/docs/light-cn","path":"/docs/light.zh-CN.md"}}},{"node":{"frontmatter":{"title":"层级面板","order":3,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-hierarchy-cn","path":"/docs/editor-hierarchy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"本地开发指南","order":3,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-pro-code-cn","path":"/docs/editor-pro-code.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵","order":3,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-sprite-cn","path":"/docs/editor-sprite.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Blender 烘焙","order":3,"type":"美术","group":null},"fields":{"slug":"/docs/artist-bake-blender-cn","path":"/docs/artist-bake-blender.zh-CN.md"}}},{"node":{"frontmatter":{"title":"材质","order":3,"type":"资源系统","group":null},"fields":{"slug":"/docs/material-cn","path":"/docs/material.zh-CN.md"}}},{"node":{"frontmatter":{"title":"粒子系统","order":2.5,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-particle-cn","path":"/docs/editor-particle.zh-CN.md"}}},{"node":{"frontmatter":{"title":"几何体模型","order":2.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-geometry-model-cn","path":"/docs/editor-geometry-model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"glTF 模型","order":2.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-component-gltf-cn","path":"/docs/editor-component-gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"环境贴图","order":2.1,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-environment-cn","path":"/docs/editor-environment.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵图集资源","order":2.1,"type":"资源系统","group":null},"fields":{"slug":"/docs/sprite-atlas-cn","path":"/docs/sprite-atlas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"帧缓冲拾取","order":2,"type":"二方库","group":null},"fields":{"slug":"/docs/framebuffer-picker-cn","path":"/docs/framebuffer-picker.zh-CN.md"}}},{"node":{"frontmatter":{"title":"2. 加载一个 3D 模型","order":2,"type":"入门","group":null},"fields":{"slug":"/docs/model-cn","path":"/docs/model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"统计面板","order":2,"type":"工具库","group":null},"fields":{"slug":"/docs/stats-cn","path":"/docs/stats.zh-CN.md"}}},{"node":{"frontmatter":{"title":"画布","order":2,"type":"核心","group":null},"fields":{"slug":"/docs/canvas-cn","path":"/docs/canvas.zh-CN.md"}}},{"node":{"frontmatter":{"title":"相机","order":2,"type":"组件","group":null},"fields":{"slug":"/docs/camera-cn","path":"/docs/camera.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出支付宝小程序包","order":2,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-export-minprogram-cn","path":"/docs/editor-export-minprogram.zh-CN.md"}}},{"node":{"frontmatter":{"title":"事件通信","order":2,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-script-communication-cn","path":"/docs/editor-script-communication.zh-CN.md"}}},{"node":{"frontmatter":{"title":"立方体纹理","order":2,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-texture-cube-map-cn","path":"/docs/editor-textureCubeMap.zh-CN.md"}}},{"node":{"frontmatter":{"title":"视图区","order":2,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-viewport-cn","path":"/docs/editor-viewport.zh-CN.md"}}},{"node":{"frontmatter":{"title":"C4D 烘焙","order":2,"type":"美术","group":null},"fields":{"slug":"/docs/artist-bake-cn","path":"/docs/artist-bake.zh-CN.md"}}},{"node":{"frontmatter":{"title":"精灵资源","order":2,"type":"资源系统","group":null},"fields":{"slug":"/docs/sprite-cn","path":"/docs/sprite.zh-CN.md"}}},{"node":{"frontmatter":{"title":"纹理资源","order":2,"type":"资源系统","group":null},"fields":{"slug":"/docs/texture-cn","path":"/docs/texture.zh-CN.md"}}},{"node":{"frontmatter":{"title":"碰撞体","order":1.4,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-collider-cn","path":"/docs/editor-collider.zh-CN.md"}}},{"node":{"frontmatter":{"title":"光照","order":1.3,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-light-cn","path":"/docs/editor-light.zh-CN.md"}}},{"node":{"frontmatter":{"title":"相机","order":1.2,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-camera-cn","path":"/docs/editor-camera.zh-CN.md"}}},{"node":{"frontmatter":{"title":"变换","order":1.1,"type":"编辑器","group":"组件"},"fields":{"slug":"/docs/editor-transform-cn","path":"/docs/editor-transform.zh-CN.md"}}},{"node":{"frontmatter":{"title":"相机控件","order":1,"type":"二方库","group":null},"fields":{"slug":"/docs/controls-cn","path":"/docs/controls.zh-CN.md"}}},{"node":{"frontmatter":{"title":"1. 绘制一个立方体","order":1,"type":"入门","group":null},"fields":{"slug":"/docs/cube-cn","path":"/docs/cube.zh-CN.md"}}},{"node":{"frontmatter":{"title":"数学库","order":1,"type":"工具库","group":null},"fields":{"slug":"/docs/math-cn","path":"/docs/math.zh-CN.md"}}},{"node":{"frontmatter":{"title":"引擎","order":1,"type":"核心","group":null},"fields":{"slug":"/docs/engine-cn","path":"/docs/engine.zh-CN.md"}}},{"node":{"frontmatter":{"title":"变换","order":1,"type":"组件","group":null},"fields":{"slug":"/docs/transform-cn","path":"/docs/transform.zh-CN.md"}}},{"node":{"frontmatter":{"title":"常用实体操作","order":1,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-entity-cn","path":"/docs/editor-entity.zh-CN.md"}}},{"node":{"frontmatter":{"title":"导出 Web 平台包","order":1,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-export-web-cn","path":"/docs/editor-export-web.zh-CN.md"}}},{"node":{"frontmatter":{"title":"快速上手","order":1,"type":"编辑器","group":"介绍"},"fields":{"slug":"/docs/editor-first-step-cn","path":"/docs/editor-first-step.zh-CN.md"}}},{"node":{"frontmatter":{"title":"菜单栏","order":1,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-menu-cn","path":"/docs/editor-menu.zh-CN.md"}}},{"node":{"frontmatter":{"title":"纹理","order":1,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-texture-cn","path":"/docs/editor-texture.zh-CN.md"}}},{"node":{"frontmatter":{"title":"场景规格","order":1,"type":"美术","group":null},"fields":{"slug":"/docs/editor-art-cn","path":"/docs/editor-art.zh-CN.md"}}},{"node":{"frontmatter":{"title":"资源管理与加载","order":1,"type":"资源系统","group":null},"fields":{"slug":"/docs/resource-manager-cn","path":"/docs/resource-manager.zh-CN.md"}}},{"node":{"frontmatter":{"title":"0. 安装 Oasis Engine","order":0,"type":"入门","group":null},"fields":{"slug":"/docs/install-cn","path":"/docs/install.zh-CN.md"}}},{"node":{"frontmatter":{"title":"支付宝/淘宝小程序","order":0,"type":"小程序","group":null},"fields":{"slug":"/docs/miniprogram-cn","path":"/docs/miniprogram.zh-CN.md"}}},{"node":{"frontmatter":{"title":"项目","order":0,"type":"编辑器","group":"基础操作"},"fields":{"slug":"/docs/editor-project-cn","path":"/docs/editor-project.zh-CN.md"}}},{"node":{"frontmatter":{"title":"项目发布","order":0,"type":"编辑器","group":"发布"},"fields":{"slug":"/docs/editor-publish-cn","path":"/docs/editor-publish.zh-CN.md"}}},{"node":{"frontmatter":{"title":"模型","order":0,"type":"编辑器","group":"资产"},"fields":{"slug":"/docs/editor-resource-gltf-cn","path":"/docs/editor-resource-gltf.zh-CN.md"}}},{"node":{"frontmatter":{"title":"脚本","order":0,"type":"编辑器","group":"脚本"},"fields":{"slug":"/docs/editor-script-cn","path":"/docs/editor-script.zh-CN.md"}}},{"node":{"frontmatter":{"title":"关于 Oasis Editor","order":0,"type":"编辑器","group":"介绍"},"fields":{"slug":"/docs/editor-cn","path":"/docs/editor.zh-CN.md"}}}]}},"pageContext":{"slug":"/docs/entity-clone-cn","type":"/docs/","locale":"/-cn/"}},"staticQueryHashes":[]}